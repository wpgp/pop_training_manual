<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Working with Data Frames | WorldPop Population Modelling Training Manual, Vol. I</title>
  <meta name="description" content="An open book of WorldPop methods to produce gridded population estimates." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Working with Data Frames | WorldPop Population Modelling Training Manual, Vol. I" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An open book of WorldPop methods to produce gridded population estimates." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Working with Data Frames | WorldPop Population Modelling Training Manual, Vol. I" />
  
  <meta name="twitter:description" content="An open book of WorldPop methods to produce gridded population estimates." />
  

<meta name="author" content="WorldPop, University of Southampton" />


<meta name="date" content="2025-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics-of-r-programming.html"/>
<link rel="next" href="working-with-spatial-data-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/health_facilities - type-CSS-0.0.1/health_facilities - type_home-button.css" rel="stylesheet" />
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link href="libs/states-CSS-0.0.1/states_home-button.css" rel="stylesheet" />
<link href="libs/states_utm-CSS-0.0.1/states_utm_home-button.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preface"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-contents"><i class="fa fa-check"></i>Book Contents</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html"><i class="fa fa-check"></i><b>1</b> Basics of R Programming</a>
<ul>
<li class="chapter" data-level="1.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#overview-of-r"><i class="fa fa-check"></i><b>1.1</b> Overview of R</a>
<ul>
<li class="chapter" data-level="" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#getting-started-with-r"><i class="fa fa-check"></i>Getting started with R</a>
<ul>
<li class="chapter" data-level="" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#downloading-r-and-rstudio"><i class="fa fa-check"></i>Downloading R and RStudio</a></li>
<li class="chapter" data-level="" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#features-of-the-r-gui-environment"><i class="fa fa-check"></i>Features of the R GUI environment</a></li>
<li class="chapter" data-level="" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#features-of-the-rstudio-environment"><i class="fa fa-check"></i>Features of the RStudio environment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#creating-opening-and-saving-r-scripts"><i class="fa fa-check"></i>Creating, opening and saving R scripts</a></li>
<li class="chapter" data-level="1.1.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#getting-and-setting-the-working-directory"><i class="fa fa-check"></i><b>1.1.1</b> Getting and setting the working directory</a></li>
<li class="chapter" data-level="1.1.2" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#creating-opening-and-saving-r-projects"><i class="fa fa-check"></i><b>1.1.2</b> Creating, opening and saving R projects</a></li>
<li class="chapter" data-level="1.1.3" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#getting-help-in-r"><i class="fa fa-check"></i><b>1.1.3</b> Getting help in R</a></li>
<li class="chapter" data-level="1.1.4" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#r-coding-best-practices"><i class="fa fa-check"></i><b>1.1.4</b> R coding best practices</a>
<ul>
<li class="chapter" data-level="1.1.4.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#commenting"><i class="fa fa-check"></i><b>1.1.4.1</b> Commenting</a></li>
<li class="chapter" data-level="1.1.4.2" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#naming-conventions"><i class="fa fa-check"></i><b>1.1.4.2</b> Naming conventions</a></li>
<li class="chapter" data-level="1.1.4.3" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#spacing"><i class="fa fa-check"></i><b>1.1.4.3</b> Spacing</a></li>
<li class="chapter" data-level="1.1.4.4" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#punctuation"><i class="fa fa-check"></i><b>1.1.4.4</b> Punctuation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#data-types-and-key-components"><i class="fa fa-check"></i><b>1.2</b> Data types and key components</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#basic-operations-in-r"><i class="fa fa-check"></i><b>1.2.1</b> Basic operations in R</a>
<ul>
<li class="chapter" data-level="1.2.1.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#arithmetic-operators"><i class="fa fa-check"></i><b>1.2.1.1</b> Arithmetic operators</a></li>
<li class="chapter" data-level="1.2.1.2" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#logical-operators"><i class="fa fa-check"></i><b>1.2.1.2</b> Logical operators</a></li>
<li class="chapter" data-level="1.2.1.3" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#other-operators"><i class="fa fa-check"></i><b>1.2.1.3</b> Other operators</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#key-functions-in-r"><i class="fa fa-check"></i><b>1.3</b> Key functions in R</a></li>
<li class="chapter" data-level="1.4" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#data-structures"><i class="fa fa-check"></i><b>1.4</b> Data structures</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#vectors"><i class="fa fa-check"></i><b>1.4.1</b> Vectors</a></li>
<li class="chapter" data-level="1.4.2" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#matrices"><i class="fa fa-check"></i><b>1.4.2</b> Matrices</a></li>
<li class="chapter" data-level="1.4.3" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#arrays"><i class="fa fa-check"></i><b>1.4.3</b> Arrays</a></li>
<li class="chapter" data-level="1.4.4" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#data-frames"><i class="fa fa-check"></i><b>1.4.4</b> Data frames</a></li>
<li class="chapter" data-level="1.4.5" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#list"><i class="fa fa-check"></i><b>1.4.5</b> List</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#end-of-module-exercises"><i class="fa fa-check"></i><b>1.5</b> End of module exercises</a></li>
<li class="chapter" data-level="1.6" data-path="basics-of-r-programming.html"><a href="basics-of-r-programming.html#useful-resources"><i class="fa fa-check"></i><b>1.6</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html"><i class="fa fa-check"></i><b>2</b> Working with Data Frames</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#importing-and-exporting-data-in-and-from-r"><i class="fa fa-check"></i><b>2.1</b> Importing and exporting data in and from R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>2.1.1</b> Installing and loading packages</a></li>
<li class="chapter" data-level="2.1.2" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#reading-data-into-the-r-environment"><i class="fa fa-check"></i><b>2.1.2</b> Reading data into the R environment</a></li>
<li class="chapter" data-level="2.1.3" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#creating-work-paths"><i class="fa fa-check"></i><b>2.1.3</b> Creating work paths</a></li>
<li class="chapter" data-level="2.1.4" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#exploring-data-attributes"><i class="fa fa-check"></i><b>2.1.4</b> Exploring data attributes</a></li>
<li class="chapter" data-level="2.1.5" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#viewing-data"><i class="fa fa-check"></i><b>2.1.5</b> Viewing data</a></li>
<li class="chapter" data-level="2.1.6" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#extracting-data"><i class="fa fa-check"></i><b>2.1.6</b> Extracting data</a></li>
<li class="chapter" data-level="2.1.7" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#attaching-data"><i class="fa fa-check"></i><b>2.1.7</b> Attaching data</a></li>
<li class="chapter" data-level="2.1.8" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#writing-data-to-external-repositories"><i class="fa fa-check"></i><b>2.1.8</b> Writing data to external repositories</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#basic-data-wrangling-methods-for-data-preparation-and-handling-in-r"><i class="fa fa-check"></i><b>2.2</b> Basic data wrangling methods for data preparation and handling in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#dealing-with-na-not-available-values"><i class="fa fa-check"></i><b>2.2.1</b> Dealing with NA (‘Not Available’) values</a></li>
<li class="chapter" data-level="2.2.2" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#key-data-wrangling-methods"><i class="fa fa-check"></i><b>2.2.2</b> Key data wrangling methods</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#data-visualisation"><i class="fa fa-check"></i><b>2.3</b> Data visualisation</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#bar-plots"><i class="fa fa-check"></i><b>2.3.1</b> Bar plots</a></li>
<li class="chapter" data-level="2.3.2" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#box-plots"><i class="fa fa-check"></i><b>2.3.2</b> Box plots</a></li>
<li class="chapter" data-level="2.3.3" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#histograms"><i class="fa fa-check"></i><b>2.3.3</b> Histograms</a></li>
<li class="chapter" data-level="2.3.4" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#density-plots"><i class="fa fa-check"></i><b>2.3.4</b> Density plots</a></li>
<li class="chapter" data-level="2.3.5" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#scatter-plots"><i class="fa fa-check"></i><b>2.3.5</b> Scatter plots</a></li>
<li class="chapter" data-level="2.3.6" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#violin-plots"><i class="fa fa-check"></i><b>2.3.6</b> Violin plots</a></li>
<li class="chapter" data-level="2.3.7" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#line-graphs"><i class="fa fa-check"></i><b>2.3.7</b> Line graphs</a></li>
<li class="chapter" data-level="2.3.8" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#population-pyramids"><i class="fa fa-check"></i><b>2.3.8</b> Population pyramids</a></li>
<li class="chapter" data-level="2.3.9" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#lollipop-plots"><i class="fa fa-check"></i><b>2.3.9</b> Lollipop plots</a></li>
<li class="chapter" data-level="2.3.10" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#plots-with-an-image-background"><i class="fa fa-check"></i><b>2.3.10</b> Plots with an image background</a></li>
<li class="chapter" data-level="2.3.11" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#viewing-and-saving-plots"><i class="fa fa-check"></i><b>2.3.11</b> Viewing and saving plots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#end-of-module-exercises-1"><i class="fa fa-check"></i><b>2.4</b> End of module exercises</a></li>
<li class="chapter" data-level="2.5" data-path="working-with-data-frames.html"><a href="working-with-data-frames.html#useful-resources-1"><i class="fa fa-check"></i><b>2.5</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html"><i class="fa fa-check"></i><b>3</b> Working with Spatial Data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#spatial-data-overview-and-types"><i class="fa fa-check"></i><b>3.1</b> Spatial data: Overview and types</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#points-data"><i class="fa fa-check"></i><b>3.1.1</b> Points data</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#areal-data"><i class="fa fa-check"></i><b>3.1.2</b> Areal data</a></li>
<li class="chapter" data-level="3.1.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#vector-data"><i class="fa fa-check"></i><b>3.1.3</b> Vector data</a>
<ul>
<li class="chapter" data-level="3.1.3.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#points"><i class="fa fa-check"></i><b>3.1.3.1</b> Points</a></li>
<li class="chapter" data-level="3.1.3.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#polylines"><i class="fa fa-check"></i><b>3.1.3.2</b> Polylines</a></li>
<li class="chapter" data-level="3.1.3.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#polygons"><i class="fa fa-check"></i><b>3.1.3.3</b> Polygons</a></li>
</ul></li>
<li class="chapter" data-level="3.1.4" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#raster-data"><i class="fa fa-check"></i><b>3.1.4</b> Raster data</a></li>
<li class="chapter" data-level="3.1.5" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#sources-of-spatial-data"><i class="fa fa-check"></i><b>3.1.5</b> Sources of spatial data</a></li>
<li class="chapter" data-level="3.1.6" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#geospatial-covariates"><i class="fa fa-check"></i><b>3.1.6</b> Geospatial covariates</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#basic-gis-concepts"><i class="fa fa-check"></i><b>3.2</b> Basic GIS concepts</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#geoprocessing"><i class="fa fa-check"></i><b>3.2.1</b> Geoprocessing</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#using-gis-in-r"><i class="fa fa-check"></i><b>3.3</b> Using GIS in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#importing-spatial-data-in-r"><i class="fa fa-check"></i><b>3.3.1</b> Importing spatial data in R</a></li>
<li class="chapter" data-level="3.3.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#handling-spatial-data-in-r"><i class="fa fa-check"></i><b>3.3.2</b> Handling spatial data in R</a>
<ul>
<li class="chapter" data-level="3.3.2.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#converting-between-vectors-and-rasters-in-r"><i class="fa fa-check"></i><b>3.3.2.1</b> Converting between vectors and rasters in R</a></li>
<li class="chapter" data-level="3.3.2.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#checking-the-resolution-and-number-of-cells"><i class="fa fa-check"></i><b>3.3.2.2</b> Checking the resolution and number of cells</a></li>
<li class="chapter" data-level="3.3.2.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#exporting-spatial-data-in-various-formats"><i class="fa fa-check"></i><b>3.3.2.3</b> Exporting spatial data in various formats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#visualisation-of-spatial-data"><i class="fa fa-check"></i><b>3.4</b> Visualisation of spatial data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#static-maps"><i class="fa fa-check"></i><b>3.4.1</b> Static maps</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#interactive-maps"><i class="fa fa-check"></i><b>3.5</b> Interactive maps</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#visualisation-with-tmap-1"><i class="fa fa-check"></i>Visualisation with <code>tmap</code></a></li>
<li class="chapter" data-level="" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#visualisation-with-leaflet"><i class="fa fa-check"></i>Visualisation with <code>leaflet</code></a></li>
<li class="chapter" data-level="" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#visualisation-with-mapview"><i class="fa fa-check"></i>Visualisation with <code>mapview</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#basic-geoprocessing"><i class="fa fa-check"></i><b>3.6</b> Basic geoprocessing</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#coordinate-reference-systems-crs"><i class="fa fa-check"></i><b>3.6.1</b> Coordinate reference systems (CRS)</a></li>
<li class="chapter" data-level="3.6.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#converting-between-latlong-and-the-universal-transverse-mercator-utm-coordinate-system"><i class="fa fa-check"></i><b>3.6.2</b> Converting between Lat/Long and the Universal Transverse Mercator (UTM) coordinate system</a></li>
<li class="chapter" data-level="3.6.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#subsetting-clipping-and-masking"><i class="fa fa-check"></i><b>3.6.3</b> Subsetting, clipping and masking</a></li>
<li class="chapter" data-level="3.6.4" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#buffer-analysis"><i class="fa fa-check"></i><b>3.6.4</b> Buffer analysis</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#end-of-module-exercises-2"><i class="fa fa-check"></i><b>3.7</b> End of module exercises</a></li>
<li class="chapter" data-level="3.8" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#useful-resources-2"><i class="fa fa-check"></i><b>3.8</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html"><i class="fa fa-check"></i><b>4</b> Introduction to Statistical Modelling with Implementation in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#concept-of-statistical-modelling"><i class="fa fa-check"></i><b>4.1</b> Concept of statistical modelling</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#overview-of-statistical-modelling"><i class="fa fa-check"></i><b>4.1.1</b> Overview of statistical modelling</a></li>
<li class="chapter" data-level="4.1.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#correlation"><i class="fa fa-check"></i><b>4.1.2</b> Correlation</a></li>
<li class="chapter" data-level="4.1.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#scaled-covariates"><i class="fa fa-check"></i><b>4.1.3</b> Scaled covariates</a></li>
<li class="chapter" data-level="4.1.4" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#uncertainty"><i class="fa fa-check"></i><b>4.1.4</b> Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#simple-regression"><i class="fa fa-check"></i><b>4.2</b> Simple regression</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#linear-regression"><i class="fa fa-check"></i><b>4.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="4.2.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#polynomial-regression"><i class="fa fa-check"></i><b>4.2.2</b> Polynomial regression</a></li>
<li class="chapter" data-level="4.2.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#non-linear-regression"><i class="fa fa-check"></i><b>4.2.3</b> Non-linear regression</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#multiple-regression"><i class="fa fa-check"></i><b>4.3</b> Multiple regression</a></li>
<li class="chapter" data-level="4.4" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#generalised-linear-regression"><i class="fa fa-check"></i><b>4.4</b> Generalised linear regression</a></li>
<li class="chapter" data-level="4.5" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#model-predictions"><i class="fa fa-check"></i><b>4.5</b> Model predictions</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#predictions-with-the-formula-and-coefficients"><i class="fa fa-check"></i><b>4.5.1</b> Predictions with the formula and coefficients</a></li>
<li class="chapter" data-level="4.5.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#predictions-with-functions"><i class="fa fa-check"></i><b>4.5.2</b> Predictions with functions</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#model-selection"><i class="fa fa-check"></i><b>4.6</b> Model selection</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#accuracy-and-precision"><i class="fa fa-check"></i><b>4.6.1</b> Accuracy and precision</a></li>
<li class="chapter" data-level="4.6.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#akaike-information-criterion"><i class="fa fa-check"></i><b>4.6.2</b> Akaike information criterion</a></li>
<li class="chapter" data-level="4.6.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#bayesian-information-criterion"><i class="fa fa-check"></i><b>4.6.3</b> Bayesian information criterion</a></li>
<li class="chapter" data-level="4.6.4" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#r-squared-statistic"><i class="fa fa-check"></i><b>4.6.4</b> R-squared statistic</a></li>
<li class="chapter" data-level="4.6.5" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#analysis-of-variance"><i class="fa fa-check"></i><b>4.6.5</b> Analysis of variance</a></li>
<li class="chapter" data-level="4.6.6" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#likelihood-ratio-testing"><i class="fa fa-check"></i><b>4.6.6</b> Likelihood ratio testing</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#stepwise-regression"><i class="fa fa-check"></i><b>4.7</b> Stepwise regression</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#forward-stepwise-regression"><i class="fa fa-check"></i><b>4.7.1</b> Forward stepwise regression</a></li>
<li class="chapter" data-level="4.7.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#backward-stepwise-regression"><i class="fa fa-check"></i><b>4.7.2</b> Backward stepwise regression</a></li>
<li class="chapter" data-level="4.7.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#both-ways-stepwise-regression"><i class="fa fa-check"></i><b>4.7.3</b> Both ways stepwise regression</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#cross-validation"><i class="fa fa-check"></i><b>4.8</b> Cross-validation</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>4.8.1</b> <em>k</em>-fold cross-validation</a></li>
<li class="chapter" data-level="4.8.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#leave-one-out-cross-validation"><i class="fa fa-check"></i><b>4.8.2</b> Leave-one-out cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#hierarchical-regression"><i class="fa fa-check"></i><b>4.9</b> Hierarchical regression</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#data-structure"><i class="fa fa-check"></i><b>4.9.1</b> Data structure</a></li>
<li class="chapter" data-level="4.9.2" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#variance-partition-coefficient"><i class="fa fa-check"></i><b>4.9.2</b> Variance partition coefficient</a></li>
<li class="chapter" data-level="4.9.3" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#random-intercepts-modelling"><i class="fa fa-check"></i><b>4.9.3</b> Random intercepts modelling</a></li>
<li class="chapter" data-level="4.9.4" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#random-intercepts-mixed-effects-modelling"><i class="fa fa-check"></i><b>4.9.4</b> Random intercepts mixed-effects modelling</a></li>
<li class="chapter" data-level="4.9.5" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#random-slope-mixed-effects-modelling"><i class="fa fa-check"></i><b>4.9.5</b> Random slope mixed-effects modelling</a></li>
<li class="chapter" data-level="4.9.6" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#adding-an-extra-level"><i class="fa fa-check"></i><b>4.9.6</b> Adding an extra level</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="introduction-to-statistical-modelling-with-implementation-in-r.html"><a href="introduction-to-statistical-modelling-with-implementation-in-r.html#useful-resources-3"><i class="fa fa-check"></i><b>4.10</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html"><i class="fa fa-check"></i><b>5</b> Probability Theory and Applications</a>
<ul>
<li class="chapter" data-level="5.1" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#introduction-to-probability"><i class="fa fa-check"></i><b>5.1</b> Introduction to probability</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#theoretical-and-experimental-probability"><i class="fa fa-check"></i><b>5.1.1</b> Theoretical and experimental probability</a></li>
<li class="chapter" data-level="5.1.2" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#keywords"><i class="fa fa-check"></i><b>5.1.2</b> Keywords</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#axioms-of-probability"><i class="fa fa-check"></i><b>5.2</b> Axioms of probability</a></li>
<li class="chapter" data-level="5.3" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#joint-probability"><i class="fa fa-check"></i><b>5.3</b> Joint probability</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#joint-probability-table"><i class="fa fa-check"></i><b>5.3.1</b> Joint probability table</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#conditional-probability"><i class="fa fa-check"></i><b>5.4</b> Conditional probability</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#multiplication-rule-of-conditional-probability"><i class="fa fa-check"></i><b>5.4.1</b> Multiplication rule of conditional probability</a></li>
<li class="chapter" data-level="5.4.2" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#law-of-total-probability"><i class="fa fa-check"></i><b>5.4.2</b> Law of total probability</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#contingency-tables"><i class="fa fa-check"></i><b>5.5</b> Contingency tables</a></li>
<li class="chapter" data-level="5.6" data-path="probability-theory-and-applications.html"><a href="probability-theory-and-applications.html#useful-resources-4"><i class="fa fa-check"></i><b>5.6</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html"><i class="fa fa-check"></i><b>6</b> Bayesian Statistical Inference</a>
<ul>
<li class="chapter" data-level="6.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#bayes-theorem"><i class="fa fa-check"></i><b>6.2</b> Bayes’ theorem</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#bayes-theorem-for-random-variables"><i class="fa fa-check"></i><b>6.2.1</b> Bayes’ theorem for random variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#the-likelihood-function"><i class="fa fa-check"></i><b>6.3</b> The likelihood function</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#different-types-and-structures"><i class="fa fa-check"></i><b>6.3.1</b> Different types and structures</a>
<ul>
<li class="chapter" data-level="6.3.1.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#count-data"><i class="fa fa-check"></i><b>6.3.1.1</b> Count data</a></li>
<li class="chapter" data-level="6.3.1.2" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#binary-data"><i class="fa fa-check"></i><b>6.3.1.2</b> Binary data</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#proportional-data"><i class="fa fa-check"></i><b>6.3.1.3</b> Proportional data</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#continuous-data"><i class="fa fa-check"></i><b>6.3.1.4</b> Continuous data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#prior-distribution"><i class="fa fa-check"></i><b>6.4</b> Prior distribution</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#conjugate-priors"><i class="fa fa-check"></i><b>6.4.1</b> Conjugate priors</a></li>
<li class="chapter" data-level="6.4.2" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#flat-improper-and-non-informative-priors"><i class="fa fa-check"></i><b>6.4.2</b> Flat, improper and non-informative priors</a></li>
<li class="chapter" data-level="6.4.3" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#informative-prior"><i class="fa fa-check"></i><b>6.4.3</b> Informative prior</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#overview-of-posterior-inference"><i class="fa fa-check"></i><b>6.5</b> Overview of posterior inference</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#markov-chain-monte-carlo-approach"><i class="fa fa-check"></i><b>6.5.1</b> Markov Chain Monte Carlo approach</a></li>
<li class="chapter" data-level="6.5.2" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#integrated-nested-laplace-approximation-approach"><i class="fa fa-check"></i><b>6.5.2</b> Integrated Nested Laplace Approximation approach</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#elicitation-of-priors"><i class="fa fa-check"></i><b>6.6</b> Elicitation of priors</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#priors-inla"><i class="fa fa-check"></i><b>6.6.1</b> Priors INLA</a>
<ul>
<li class="chapter" data-level="6.6.1.1" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#penalised-complexity-priors"><i class="fa fa-check"></i><b>6.6.1.1</b> Penalised Complexity priors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#sampling-and-evaluating-the-posterior-density"><i class="fa fa-check"></i><b>6.7</b> Sampling and evaluating the posterior density</a></li>
<li class="chapter" data-level="6.8" data-path="bayesian-statistical-inference.html"><a href="bayesian-statistical-inference.html#useful-resources-5"><i class="fa fa-check"></i><b>6.8</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><i class="fa fa-check"></i><b>7</b> Introduction to Small Area Population Estimation and Modelling (SAPEM)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#small-area-population-estimation"><i class="fa fa-check"></i><b>7.1</b> Small area population estimation</a></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#direct-estimation"><i class="fa fa-check"></i><b>7.2</b> Direct estimation</a></li>
<li class="chapter" data-level="7.3" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#indirect-estimation"><i class="fa fa-check"></i><b>7.3</b> Indirect estimation</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#approaches-for-creating-gridded-population-datasets"><i class="fa fa-check"></i><b>7.3.1</b> Approaches for creating gridded population datasets</a>
<ul>
<li class="chapter" data-level="7.3.1.1" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#top-down"><i class="fa fa-check"></i><b>7.3.1.1</b> Top-down</a></li>
<li class="chapter" data-level="7.3.1.2" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#bottom-up"><i class="fa fa-check"></i><b>7.3.1.2</b> Bottom-up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-small-area-population-estimation-and-modelling-sapem.html"><a href="introduction-to-small-area-population-estimation-and-modelling-sapem.html#useful-resources-6"><i class="fa fa-check"></i><b>7.4</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html"><i class="fa fa-check"></i><b>8</b> Bayesian Hierarchical Population Modelling in R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#data-sources"><i class="fa fa-check"></i><b>8.1</b> Data sources</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#population-data"><i class="fa fa-check"></i><b>8.1.1</b> Population data</a></li>
<li class="chapter" data-level="8.1.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#settlement-data"><i class="fa fa-check"></i><b>8.1.2</b> Settlement data</a></li>
<li class="chapter" data-level="8.1.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#other-sources"><i class="fa fa-check"></i><b>8.1.3</b> Other sources</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#data-cleaning-and-covariates-extraction"><i class="fa fa-check"></i><b>8.2</b> Data cleaning and covariates extraction</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#extracting-continuous-rasters"><i class="fa fa-check"></i><b>8.2.1</b> Extracting continuous rasters</a></li>
<li class="chapter" data-level="8.2.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#extracting-categorical-rasters"><i class="fa fa-check"></i><b>8.2.2</b> Extracting categorical rasters</a></li>
<li class="chapter" data-level="8.2.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#extracting-building-count"><i class="fa fa-check"></i><b>8.2.3</b> Extracting building count</a></li>
<li class="chapter" data-level="8.2.4" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#exracting-building-total-area"><i class="fa fa-check"></i><b>8.2.4</b> Exracting building total area</a></li>
<li class="chapter" data-level="8.2.5" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#adding-admin-area-names-to-the-data"><i class="fa fa-check"></i><b>8.2.5</b> Adding admin area names to the data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#exploratory-analysis"><i class="fa fa-check"></i><b>8.3</b> Exploratory analysis</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#basic-visualisation"><i class="fa fa-check"></i><b>8.3.1</b> Basic visualisation</a></li>
<li class="chapter" data-level="8.3.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#geospatial-visualisation"><i class="fa fa-check"></i><b>8.3.2</b> Geospatial visualisation</a></li>
<li class="chapter" data-level="8.3.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#checking-for-nas"><i class="fa fa-check"></i><b>8.3.3</b> Checking for NAs</a></li>
<li class="chapter" data-level="8.3.4" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#checking-for-minimum-and-maximum-values"><i class="fa fa-check"></i><b>8.3.4</b> Checking for minimum and maximum values</a></li>
<li class="chapter" data-level="8.3.5" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#checking-the-distribution-of-categorical-variables"><i class="fa fa-check"></i><b>8.3.5</b> Checking the distribution of categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#model-set-up"><i class="fa fa-check"></i><b>8.4</b> Model set-up</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#simple-linear-regression"><i class="fa fa-check"></i><b>8.4.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="8.4.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#multiple-regression-1"><i class="fa fa-check"></i><b>8.4.2</b> Multiple regression</a></li>
<li class="chapter" data-level="8.4.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#generalised-linear-regression-1"><i class="fa fa-check"></i><b>8.4.3</b> Generalised linear regression</a></li>
<li class="chapter" data-level="8.4.4" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#fitting-fixed-effects-models-in-r-inla"><i class="fa fa-check"></i><b>8.4.4</b> Fitting fixed effects models in <code>R-INLA</code></a></li>
<li class="chapter" data-level="8.4.5" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#fitting-bayesian-hierarchical-mixed-effects-models-in-r-inla"><i class="fa fa-check"></i><b>8.4.5</b> Fitting Bayesian hierarchical mixed effects models in <code>R-INLA</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#stan-mcmc-approach"><i class="fa fa-check"></i><b>8.5</b> STAN (MCMC) approach</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#metropolis-hastings-algorithm"><i class="fa fa-check"></i><b>8.5.1</b> Metropolis-Hastings algorithm</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#inla-and-inla-spde-approach"><i class="fa fa-check"></i><b>8.6</b> INLA and INLA-SPDE approach</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#mesh-construction"><i class="fa fa-check"></i><b>8.6.1</b> Mesh construction</a></li>
<li class="chapter" data-level="8.6.2" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#building-the-spde"><i class="fa fa-check"></i><b>8.6.2</b> Building the SPDE</a></li>
<li class="chapter" data-level="8.6.3" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#projection-matrix"><i class="fa fa-check"></i><b>8.6.3</b> Projection matrix</a></li>
<li class="chapter" data-level="8.6.4" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#data-location-indexing"><i class="fa fa-check"></i><b>8.6.4</b> Data location indexing</a></li>
<li class="chapter" data-level="8.6.5" data-path="bayesian-hierarchical-population-modelling-in-r.html"><a href="bayesian-hierarchical-population-modelling-in-r.html#projection-data"><i class="fa fa-check"></i><b>8.6.5</b> Projection data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html"><i class="fa fa-check"></i><b>9</b> Model Fit Checks and Cross-Validation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#model-assumption-checking"><i class="fa fa-check"></i><b>9.1</b> Model assumption checking</a></li>
<li class="chapter" data-level="9.2" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#model-selection-1"><i class="fa fa-check"></i><b>9.2</b> Model selection</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#watanabe-akaike-information-criterion-waic"><i class="fa fa-check"></i><b>9.2.1</b> Watanabe-Akaike Information Criterion (WAIC)</a></li>
<li class="chapter" data-level="9.2.2" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#deviance-information-criterion-dic"><i class="fa fa-check"></i><b>9.2.2</b> Deviance Information Criterion (DIC)</a></li>
<li class="chapter" data-level="9.2.3" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#conditional-predictive-ordinate-cpo"><i class="fa fa-check"></i><b>9.2.3</b> Conditional predictive ordinate (CPO)</a></li>
<li class="chapter" data-level="9.2.4" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#probability-integral-transform-pit"><i class="fa fa-check"></i><b>9.2.4</b> Probability Integral Transform (PIT)</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#cross-validation-1"><i class="fa fa-check"></i><b>9.3</b> Cross-validation</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#basic-cross-validation"><i class="fa fa-check"></i><b>9.3.1</b> Basic cross-validation</a></li>
<li class="chapter" data-level="9.3.2" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#k-fold-cross-validation-1"><i class="fa fa-check"></i><b>9.3.2</b> K-Fold Cross-Validation</a></li>
<li class="chapter" data-level="9.3.3" data-path="model-fit-checks-and-cross-validation.html"><a href="model-fit-checks-and-cross-validation.html#useful-resources-7"><i class="fa fa-check"></i><b>9.3.3</b> Useful resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html"><i class="fa fa-check"></i><b>10</b> Population Prediction and Uncertainty Quantification</a>
<ul>
<li class="chapter" data-level="10.1" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#covariate-stacking"><i class="fa fa-check"></i><b>10.1</b> Covariate stacking</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#admin-names"><i class="fa fa-check"></i><b>10.1.1</b> Admin names</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#grid-cellpixel-level-prediction"><i class="fa fa-check"></i><b>10.2</b> Grid cell/pixel level prediction</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#pre-processing"><i class="fa fa-check"></i><b>10.2.1</b> Pre-processing</a></li>
<li class="chapter" data-level="10.2.2" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#inla-spde-approach"><i class="fa fa-check"></i><b>10.2.2</b> INLA-SPDE approach</a>
<ul>
<li class="chapter" data-level="10.2.2.1" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#predictions"><i class="fa fa-check"></i><b>10.2.2.1</b> Predictions</a></li>
</ul></li>
<li class="chapter" data-level="10.2.3" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#posterior-distribution-simulation"><i class="fa fa-check"></i><b>10.2.3</b> Posterior distribution simulation</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#aggregation-to-area-units-of-interest-and-uncertainty-quantification"><i class="fa fa-check"></i><b>10.3</b> Aggregation to area units of interest and uncertainty quantification</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#rasterising-the-predictions-at-grid-cell-level"><i class="fa fa-check"></i><b>10.3.1</b> Rasterising the predictions at grid cell level</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="population-prediction-and-uncertainty-quantification.html"><a href="population-prediction-and-uncertainty-quantification.html#useful-resources-8"><i class="fa fa-check"></i><b>10.4</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html"><i class="fa fa-check"></i><b>11</b> Age-Sex Disaggregation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html#disaggregation-of-population-totals-by-age-sex-proportions"><i class="fa fa-check"></i><b>11.1</b> Disaggregation of population totals by age-sex proportions</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html#unavailable-age-sex-data"><i class="fa fa-check"></i><b>11.1.1</b> Unavailable age-sex data</a></li>
<li class="chapter" data-level="11.1.2" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html#available-age-sex-data"><i class="fa fa-check"></i><b>11.1.2</b> Available age-sex data</a>
<ul>
<li class="chapter" data-level="11.1.2.1" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html#age-sex-disaggregation-1"><i class="fa fa-check"></i><b>11.1.2.1</b> Age-sex disaggregation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="age-sex-disaggregation.html"><a href="age-sex-disaggregation.html#useful-resources-9"><i class="fa fa-check"></i><b>11.2</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html"><i class="fa fa-check"></i><b>12</b> Exercise Solutions by Module</a>
<ul>
<li class="chapter" data-level="12.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#module-1"><i class="fa fa-check"></i><b>12.1</b> Module 1</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises"><i class="fa fa-check"></i><b>12.1.1</b> General exercises</a></li>
<li class="chapter" data-level="12.1.2" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#end-of-module-exercises-3"><i class="fa fa-check"></i><b>12.1.2</b> End of module exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#module-2"><i class="fa fa-check"></i><b>12.2</b> Module 2</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises-1"><i class="fa fa-check"></i><b>12.2.1</b> General exercises</a></li>
<li class="chapter" data-level="12.2.2" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#end-of-module-exercises-4"><i class="fa fa-check"></i><b>12.2.2</b> End of module exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#module-3"><i class="fa fa-check"></i><b>12.3</b> Module 3</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises-2"><i class="fa fa-check"></i><b>12.3.1</b> General exercises</a></li>
<li class="chapter" data-level="12.3.2" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#end-of-module-exercises-5"><i class="fa fa-check"></i><b>12.3.2</b> End of module exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#module-4"><i class="fa fa-check"></i><b>12.4</b> Module 4</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises-3"><i class="fa fa-check"></i><b>12.4.1</b> General exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#module-5"><i class="fa fa-check"></i><b>12.5</b> Module 5</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises-4"><i class="fa fa-check"></i><b>12.5.1</b> General exercises</a></li>
<li class="chapter" data-level="12.5.2" data-path="exercise-solutions-by-module.html"><a href="exercise-solutions-by-module.html#general-exercises-5"><i class="fa fa-check"></i><b>12.5.2</b> General exercises</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WorldPop Population Modelling Training Manual, Vol. I</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-data-frames" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Working with Data Frames<a href="working-with-data-frames.html#working-with-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This module focuses on working with data frames, covering the installation and loading of data into the R environment, and basic data wrangling methods. Also included in Module 2 is a thorough introduction into data visualisation methods, key foundational knowledge that will be utilised in future modules.</p>
<div id="importing-and-exporting-data-in-and-from-r" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Importing and exporting data in and from R<a href="working-with-data-frames.html#importing-and-exporting-data-in-and-from-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="installing-and-loading-packages" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Installing and loading packages<a href="working-with-data-frames.html#installing-and-loading-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R uses packages (libraries) to store different functions, and has thousands (16,000) of these packages. The “official” packages for R can be found on <a href="https://cran.r-project.org/">CRAN</a>, but there are many other useful packages available on <a href="https://github.com/">GitHub</a>.</p>
<p>Packages are a collection of R functions, code, and occasionally data that enables efficient work in R without the need to write complicated code.</p>
<p>Examples of common R packages include:</p>
<ul>
<li><strong>tidyverse</strong>: a collection of R packages designed for data manipulation and visualisation, including the following packages</li>
<li><strong>ggplot2</strong>: designed for elegant data visualisation and graphics</li>
<li><strong>dplyr</strong>: designed for data manipulation and cleaning</li>
<li><strong>tidyr</strong>: designed for reshaping and cleaning data</li>
<li><strong>readr</strong>: designed for reading and writing delimited files</li>
<li><strong>purrr</strong>: designed for functional programming in R</li>
<li><strong>tibble</strong>: designed to be a modern reimplementation of data frames</li>
<li><strong>stringr</strong>: designed for working with strings</li>
<li><strong>lubridate</strong>: designed for working with dates and times</li>
<li><strong>forcats</strong>: designed for working with categorical variables</li>
<li><strong>sf</strong>: designed for working with spatial vector data</li>
<li><strong>rstan</strong> or <strong>INLA</strong>: designed for use with Bayesian statistics</li>
</ul>
<p>To utilise the packages in R, it is required to install and load the packages into the session. Some packages are already installed and loaded as part of the <code>base</code> R package, however, for those which are not the functions <code>install.packages()</code> can be used to install packages, ensuring that the name of any packages included are enclosed by either <code>'</code> or <code>"</code> and <code>library()</code> can be used to load the package from the library.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="working-with-data-frames.html#cb144-1" tabindex="-1"></a><span class="co">#install ggplot2 package </span></span>
<span id="cb144-2"><a href="working-with-data-frames.html#cb144-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb144-3"><a href="working-with-data-frames.html#cb144-3" tabindex="-1"></a><span class="co">#load the ggplot2 package</span></span>
<span id="cb144-4"><a href="working-with-data-frames.html#cb144-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>Alternatively, available packages can be accessed from the “Packages” window in Pane 3 (bottom-right pane) of the RStudio GUI. In this window, you can either search for the package directly, or scroll through the list and check the tick box of the desired package to load it into R.</p>
</div>
<div id="reading-data-into-the-r-environment" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Reading data into the R environment<a href="working-with-data-frames.html#reading-data-into-the-r-environment" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Different data formats require different functions in R for importation into R, with some formats requiring additional packages to allow installation. From <code>base</code> R, the function <code>read.table()</code> reads the chosen <code>.txt</code> file included as an argument. However, this function does not ‘read’ the file into the R environment, only prints the file in the console. To import the file into the R environment, you must assign the results to a variable. The other key functions for importing data into R are given in the table below with example code on how to use the functions provided also.</p>
<div style="width: 100%; text-align: center; display: flex; justify-content: center;">
<table style="width:81%;">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th></th>
<th></th>
</tr>
<tr class="even">
<th>Data type</th>
<th>Function</th>
<th>Package required</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.csv</code></td>
<td><code>read.csv()</code></td>
<td>none (in <code>base</code>)</td>
</tr>
<tr class="even">
<td><code>.txt</code>, text files</td>
<td><code>read.table()</code></td>
<td>none (in <code>base</code>)</td>
</tr>
<tr class="odd">
<td><code>.xslx</code>, excel
workbook</td>
<td><code>read.excel()</code></td>
<td><code>readxl</code></td>
</tr>
<tr class="even">
<td><code>.dta</code>, STATA
files</td>
<td><code>read.dta()</code></td>
<td><code>foreign</code></td>
</tr>
<tr class="odd">
<td><code>.sav</code>, SPSS
files</td>
<td><code>read.spss()</code></td>
<td><code>foreign</code></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="working-with-data-frames.html#cb145-1" tabindex="-1"></a><span class="co">#import a text or .txt file </span></span>
<span id="cb145-2"><a href="working-with-data-frames.html#cb145-2" tabindex="-1"></a>text_data<span class="ot">&lt;-</span><span class="fu">read.table</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path,<span class="st">&quot;sample_data.txt&quot;</span>)) </span>
<span id="cb145-3"><a href="working-with-data-frames.html#cb145-3" tabindex="-1"></a></span>
<span id="cb145-4"><a href="working-with-data-frames.html#cb145-4" tabindex="-1"></a><span class="co">#import a .csv file </span></span>
<span id="cb145-5"><a href="working-with-data-frames.html#cb145-5" tabindex="-1"></a>csv_data1 <span class="ot">&lt;-</span><span class="fu">read.table</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path,<span class="st">&quot;sample_data.csv&quot;</span>), </span>
<span id="cb145-6"><a href="working-with-data-frames.html#cb145-6" tabindex="-1"></a>                       <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb145-7"><a href="working-with-data-frames.html#cb145-7" tabindex="-1"></a>                       <span class="at">header =</span> <span class="cn">TRUE</span>) </span>
<span id="cb145-8"><a href="working-with-data-frames.html#cb145-8" tabindex="-1"></a>csv_data2 <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path,<span class="st">&quot;sample_data.csv&quot;</span>))</span>
<span id="cb145-9"><a href="working-with-data-frames.html#cb145-9" tabindex="-1"></a></span>
<span id="cb145-10"><a href="working-with-data-frames.html#cb145-10" tabindex="-1"></a><span class="co">#import an Excel Workbook file </span></span>
<span id="cb145-11"><a href="working-with-data-frames.html#cb145-11" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>) </span>
<span id="cb145-12"><a href="working-with-data-frames.html#cb145-12" tabindex="-1"></a><span class="fu">library</span>(readxl) </span>
<span id="cb145-13"><a href="working-with-data-frames.html#cb145-13" tabindex="-1"></a>excel_data<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path,<span class="st">&quot;sample_data.xlsx&quot;</span>)) </span>
<span id="cb145-14"><a href="working-with-data-frames.html#cb145-14" tabindex="-1"></a></span>
<span id="cb145-15"><a href="working-with-data-frames.html#cb145-15" tabindex="-1"></a><span class="co">#import a STATA file </span></span>
<span id="cb145-16"><a href="working-with-data-frames.html#cb145-16" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;foreign&quot;</span>) </span>
<span id="cb145-17"><a href="working-with-data-frames.html#cb145-17" tabindex="-1"></a><span class="fu">library</span>(foreign) </span>
<span id="cb145-18"><a href="working-with-data-frames.html#cb145-18" tabindex="-1"></a>stata_data<span class="ot">&lt;-</span><span class="fu">read.dta</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path,<span class="st">&quot;sample_data.dta&quot;</span>))</span></code></pre></div>
<p>Alternatively to pasting the data path, the function <code>file.choose()</code> can be used, which opens a window on the computer for you to select the file you wish to import.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="working-with-data-frames.html#cb146-1" tabindex="-1"></a><span class="co">#import a text or .txt file </span></span>
<span id="cb146-2"><a href="working-with-data-frames.html#cb146-2" tabindex="-1"></a>text_data2<span class="ot">&lt;-</span><span class="fu">read.table</span>(<span class="at">file =</span> <span class="fu">file.choose</span>()) </span></code></pre></div>
<p>Another option for loading data in R is to use the menus in the main toolbar following <strong>File &gt; Import Dataset &gt; From [data format of choice] &gt; [browse for file on the pop-up window]</strong> or in the Environment pane following <strong>Import Dataset &gt; From [data format of choice] &gt; [browse for file on the pop-up window]</strong>. Both menus are shown in Figures 1 and 2 respectively. This practice is <em>not</em> encouraged however, given that it is not hard-coded in the script, it is better practice to use the functions above in the script to import your chosen dataset.</p>
<!-- ![Import data via Toolbar](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/import data toolbar.png) -->
<!-- ![Import data via Toolbar](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/import data toolbar.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-19"></span>
<img src="figures/2_images/import%20data%20toolbar.png" alt="Import table via Toolbar" width="80%" />
<p class="caption">
Figure 2.1: Import table via Toolbar
</p>
</div>
<!-- ![Import data via Environment](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/import data environment.png) -->
<!-- ![Import data via Environment](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/import data environment.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-20"></span>
<img src="figures/2_images/import%20data%20environment.png" alt="Import data via Environment" width="80%" />
<p class="caption">
Figure 2.2: Import data via Environment
</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>Exercise:</strong> What are the defaults for the header argument in the functions <code>read.table()</code> and <code>read.csv()</code>?</p>
<ol style="list-style-type: decimal">
<li><p><code>header = T</code> in <code>read.table()</code> and <code>header = T</code> in <code>read.csv()</code></p></li>
<li><p><code>header = T</code> in <code>read.table()</code> and <code>header = F</code> in <code>read.csv()</code></p></li>
<li><p><code>header = F</code> in <code>read.table()</code> and <code>header = T</code> in <code>read.csv()</code></p></li>
<li><p><code>header = F</code> in <code>read.table()</code> and <code>header = F</code> in <code>read.csv()</code></p></li>
</ol>
</div>
</div>
<div id="creating-work-paths" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Creating work paths<a href="working-with-data-frames.html#creating-work-paths" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Setting the working directory to a single folder means that R can only access files within that folder and cannot open any folders within a folder.</p>
<p>If you have several folders within a folder that need accessing, or need your input and output files and immediate and final results stored in different folders. In these instances, rather than setting a working directory it can be better to store the path to folder as a string, setting a ‘parent directory’. Then use the function <code>read.table()</code> to import the data, which can read both standard <code>.txt</code> and <code>.csv</code> data</p>
<p>setting a work path allows for you to set a ‘parent directory’ which solves this problem.</p>
<p>This can be created through setting a path to the parent directory.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="working-with-data-frames.html#cb147-1" tabindex="-1"></a><span class="co">#parent directory</span></span>
<span id="cb147-2"><a href="working-with-data-frames.html#cb147-2" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;C:Users/YOUR_NAME&quot;</span> </span>
<span id="cb147-3"><a href="working-with-data-frames.html#cb147-3" tabindex="-1"></a></span>
<span id="cb147-4"><a href="working-with-data-frames.html#cb147-4" tabindex="-1"></a><span class="co">#save in a folder called &quot;training&quot;</span></span>
<span id="cb147-5"><a href="working-with-data-frames.html#cb147-5" tabindex="-1"></a>out_path <span class="ot">&lt;-</span> <span class="fu">paste0</span>(path, <span class="st">&quot;/training&quot;</span>) </span>
<span id="cb147-6"><a href="working-with-data-frames.html#cb147-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(out_path))</span>
<span id="cb147-7"><a href="working-with-data-frames.html#cb147-7" tabindex="-1"></a>{</span>
<span id="cb147-8"><a href="working-with-data-frames.html#cb147-8" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">file.path</span>(out_path))</span>
<span id="cb147-9"><a href="working-with-data-frames.html#cb147-9" tabindex="-1"></a>}</span></code></pre></div>
<p>You can also create a work path using the current working directory as the parent directory.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="working-with-data-frames.html#cb148-1" tabindex="-1"></a><span class="co">#working directory as parent directory</span></span>
<span id="cb148-2"><a href="working-with-data-frames.html#cb148-2" tabindex="-1"></a>out_path <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">&quot;/training&quot;</span>)</span>
<span id="cb148-3"><a href="working-with-data-frames.html#cb148-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(out_path))</span>
<span id="cb148-4"><a href="working-with-data-frames.html#cb148-4" tabindex="-1"></a>{</span>
<span id="cb148-5"><a href="working-with-data-frames.html#cb148-5" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">file.path</span>(out_path))</span>
<span id="cb148-6"><a href="working-with-data-frames.html#cb148-6" tabindex="-1"></a>}</span></code></pre></div>
<p>You can set your parent directory to be your working directory as follows.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="working-with-data-frames.html#cb149-1" tabindex="-1"></a><span class="co">#set parent directory to working directory</span></span>
<span id="cb149-2"><a href="working-with-data-frames.html#cb149-2" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">file.exists</span>(out_path)){ <span class="fu">setwd</span>(<span class="fu">file.path</span>(out_path))</span>
<span id="cb149-3"><a href="working-with-data-frames.html#cb149-3" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb149-4"><a href="working-with-data-frames.html#cb149-4" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">file.path</span>(out_path))</span>
<span id="cb149-5"><a href="working-with-data-frames.html#cb149-5" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="fu">file.path</span>(out_path))</span>
<span id="cb149-6"><a href="working-with-data-frames.html#cb149-6" tabindex="-1"></a>}</span></code></pre></div>
<!-- input.path <- "C:/Local/WorldPop_TNSO_UNFPA/introToR/Data/"  -->
<!-- output.dir <- "C:/Local/WorldPop_TNSO_UNFPA /introToR/Results/" -->
</div>
<div id="exploring-data-attributes" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Exploring data attributes<a href="working-with-data-frames.html#exploring-data-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div style="width: 100%; text-align: center; display: flex; justify-content: center;">
<table style="width:53%;">
<colgroup>
<col width="26%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th></th>
</tr>
<tr class="even">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>class()</code></td>
<td>class of the
variable</td>
</tr>
<tr class="even">
<td><code>colnames()</code></td>
<td>gives the column
names</td>
</tr>
<tr class="odd">
<td><code>describe()</code></td>
<td>summary of data -
requires <code>psych</code>
package</td>
</tr>
<tr class="even">
<td><code>dim()</code></td>
<td>gives dimensions
of the data</td>
</tr>
<tr class="odd">
<td><code>factor()</code></td>
<td>change to a
factor</td>
</tr>
<tr class="even">
<td><code>glimpse()</code></td>
<td>view data
structure</td>
</tr>
<tr class="odd">
<td><code>head()</code></td>
<td>gives first six
(6) rows of data</td>
</tr>
<tr class="even">
<td><code>head(mydata, n)</code></td>
<td>gives first <code>n</code>
(6) rows of data
called <code>mydata</code></td>
</tr>
<tr class="odd">
<td><code>headtail()</code></td>
<td>first and last
rows of data -
requires <code>psych</code>
package</td>
</tr>
<tr class="even">
<td><code>length()</code></td>
<td>length of a
vector</td>
</tr>
<tr class="odd">
<td><code>ls()</code></td>
<td>lists all items
available in the
R environment</td>
</tr>
<tr class="even">
<td><code>names()</code></td>
<td>gives column or
variable names</td>
</tr>
<tr class="odd">
<td><code>ncol()</code></td>
<td>number of columns</td>
</tr>
<tr class="even">
<td><code>nrow()</code></td>
<td>number of rows</td>
</tr>
<tr class="odd">
<td><code>row()</code></td>
<td>gives the row
names</td>
</tr>
<tr class="even">
<td><code>rm()</code></td>
<td>removes selected
items from the R
environment</td>
</tr>
<tr class="odd">
<td><code>str()</code></td>
<td>gives full
structure of data</td>
</tr>
<tr class="even">
<td><code>summary()</code></td>
<td>summary of a
vector</td>
</tr>
<tr class="odd">
<td><code>table()</code></td>
<td>frequency table
of a vector</td>
</tr>
<tr class="even">
<td><code>tail()</code></td>
<td>gives last six
(6) rows of data</td>
</tr>
<tr class="odd">
<td><code>unique()</code></td>
<td>unique values of
a vector</td>
</tr>
<tr class="even">
<td><code>View()</code></td>
<td>view data</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="working-with-data-frames.html#cb150-1" tabindex="-1"></a><span class="co">#&#39;mtcars&#39; is a dataset available in the &#39;datasets&#39; package with data on </span></span>
<span id="cb150-2"><a href="working-with-data-frames.html#cb150-2" tabindex="-1"></a><span class="co">#11 different aspects of auto mobiles for 32 auto mobiles from the 1974 Motor </span></span>
<span id="cb150-3"><a href="working-with-data-frames.html#cb150-3" tabindex="-1"></a><span class="co">#Trend US magazine</span></span>
<span id="cb150-4"><a href="working-with-data-frames.html#cb150-4" tabindex="-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb150-5"><a href="working-with-data-frames.html#cb150-5" tabindex="-1"></a><span class="co">#information on the dataset in the &#39;Help&#39; pane</span></span>
<span id="cb150-6"><a href="working-with-data-frames.html#cb150-6" tabindex="-1"></a>?mtcars</span>
<span id="cb150-7"><a href="working-with-data-frames.html#cb150-7" tabindex="-1"></a><span class="co">#load data and assign to &#39;cars_data&#39;</span></span>
<span id="cb150-8"><a href="working-with-data-frames.html#cb150-8" tabindex="-1"></a>cars_data <span class="ot">&lt;-</span> mtcars</span>
<span id="cb150-9"><a href="working-with-data-frames.html#cb150-9" tabindex="-1"></a></span>
<span id="cb150-10"><a href="working-with-data-frames.html#cb150-10" tabindex="-1"></a><span class="co">#dimension of data</span></span>
<span id="cb150-11"><a href="working-with-data-frames.html#cb150-11" tabindex="-1"></a><span class="fu">dim</span>(cars_data)</span></code></pre></div>
<pre><code>## [1] 32 11</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="working-with-data-frames.html#cb152-1" tabindex="-1"></a><span class="co">#variable names of data</span></span>
<span id="cb152-2"><a href="working-with-data-frames.html#cb152-2" tabindex="-1"></a><span class="fu">names</span>(cars_data)</span></code></pre></div>
<pre><code>##  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;drat&quot; &quot;wt&quot;   &quot;qsec&quot; &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot; &quot;carb&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="working-with-data-frames.html#cb154-1" tabindex="-1"></a><span class="co">#first 6 rows of data</span></span>
<span id="cb154-2"><a href="working-with-data-frames.html#cb154-2" tabindex="-1"></a><span class="fu">head</span>(cars_data)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="working-with-data-frames.html#cb156-1" tabindex="-1"></a><span class="co">#last 6 rows of data</span></span>
<span id="cb156-2"><a href="working-with-data-frames.html#cb156-2" tabindex="-1"></a><span class="fu">tail</span>(cars_data)</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt qsec vs am gear carb
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
## Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
## Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="working-with-data-frames.html#cb158-1" tabindex="-1"></a><span class="co">#install psych package</span></span>
<span id="cb158-2"><a href="working-with-data-frames.html#cb158-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;psych&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="working-with-data-frames.html#cb159-1" tabindex="-1"></a><span class="co">#load psych package</span></span>
<span id="cb159-2"><a href="working-with-data-frames.html#cb159-2" tabindex="-1"></a><span class="fu">library</span>(psych)</span></code></pre></div>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="working-with-data-frames.html#cb160-1" tabindex="-1"></a><span class="co">#psych package provides more flexible alternatives to functions in base R</span></span>
<span id="cb160-2"><a href="working-with-data-frames.html#cb160-2" tabindex="-1"></a><span class="fu">describe</span>(cars_data)</span></code></pre></div>
<pre><code>##      vars  n   mean     sd median trimmed    mad   min    max  range  skew kurtosis    se
## mpg     1 32  20.09   6.03  19.20   19.70   5.41 10.40  33.90  23.50  0.61    -0.37  1.07
## cyl     2 32   6.19   1.79   6.00    6.23   2.97  4.00   8.00   4.00 -0.17    -1.76  0.32
## disp    3 32 230.72 123.94 196.30  222.52 140.48 71.10 472.00 400.90  0.38    -1.21 21.91
## hp      4 32 146.69  68.56 123.00  141.19  77.10 52.00 335.00 283.00  0.73    -0.14 12.12
## drat    5 32   3.60   0.53   3.70    3.58   0.70  2.76   4.93   2.17  0.27    -0.71  0.09
## wt      6 32   3.22   0.98   3.33    3.15   0.77  1.51   5.42   3.91  0.42    -0.02  0.17
## qsec    7 32  17.85   1.79  17.71   17.83   1.42 14.50  22.90   8.40  0.37     0.34  0.32
## vs      8 32   0.44   0.50   0.00    0.42   0.00  0.00   1.00   1.00  0.24    -2.00  0.09
## am      9 32   0.41   0.50   0.00    0.38   0.00  0.00   1.00   1.00  0.36    -1.92  0.09
## gear   10 32   3.69   0.74   4.00    3.62   1.48  3.00   5.00   2.00  0.53    -1.07  0.13
## carb   11 32   2.81   1.62   2.00    2.65   1.48  1.00   8.00   7.00  1.05     1.26  0.29</code></pre>
</div>
<div id="viewing-data" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Viewing data<a href="working-with-data-frames.html#viewing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data imported into R can be viewed in the Environment pane, with the column/variable names given, the data type of each variable and the first 10 observations (provided the observations do not go ‘off’ the display due to length) for each variable given as a summary of the data structure. If the summary is not given, ensure that the display of the Environment is set to ‘list’ and click the arrow to the left of the dataset name.</p>
<!-- ![View data in Environment](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/view data environment.png) -->
<!-- ![View data in Environment](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/view data environment.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-21"></span>
<img src="figures/2_images/view%20data%20environment.png" alt="View data in Environment" width="80%" />
<p class="caption">
Figure 2.3: View data in Environment
</p>
</div>
<p>Alternatively, the function <code>View()</code> can be used to display the full data in a new tab in the first (1st) pane, adjacent to the script.</p>
<!-- ![View data in new tab](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/view data tab.png) -->
<!-- ![View data in new tab](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/view data tab.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-22"></span>
<img src="figures/2_images/view%20data%20tab.png" alt="View data in new tab" width="80%" />
<p class="caption">
Figure 2.4: View data in new tab
</p>
</div>
</div>
<div id="extracting-data" class="section level3 hasAnchor" number="2.1.6">
<h3><span class="header-section-number">2.1.6</span> Extracting data<a href="working-with-data-frames.html#extracting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As with the different data structures in R such as vectors and data frames, data can be extracted from a dataset using square brackets, <code>[]</code>, known as <strong>sub-setting</strong> or <strong>slicing</strong>. Additionally, the dollar sign, <code>$</code> can be used to extract variables/access columns from a dataset.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="working-with-data-frames.html#cb162-1" tabindex="-1"></a><span class="co">#subset the data to only show the rows which have mpg greater than 25</span></span>
<span id="cb162-2"><a href="working-with-data-frames.html#cb162-2" tabindex="-1"></a>cars_data[cars_data<span class="sc">$</span>mpg<span class="sc">&gt;</span><span class="dv">25</span>,]</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
<p>Data can also be sliced by a given index using a colon, <code>:</code>, to represent a given range.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="working-with-data-frames.html#cb164-1" tabindex="-1"></a><span class="co">#return the fifth (5th) to the tenth (10th) rows of the data</span></span>
<span id="cb164-2"><a href="working-with-data-frames.html#cb164-2" tabindex="-1"></a>cars_data[<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##                    mpg cyl  disp  hp drat   wt  qsec vs am gear carb
## Hornet Sportabout 18.7   8 360.0 175 3.15 3.44 17.02  0  0    3    2
## Valiant           18.1   6 225.0 105 2.76 3.46 20.22  1  0    3    1
## Duster 360        14.3   8 360.0 245 3.21 3.57 15.84  0  0    3    4
## Merc 240D         24.4   4 146.7  62 3.69 3.19 20.00  1  0    4    2
## Merc 230          22.8   4 140.8  95 3.92 3.15 22.90  1  0    4    2
## Merc 280          19.2   6 167.6 123 3.92 3.44 18.30  1  0    4    4</code></pre>
<p>Through extracting variables from the datasets, the summary statistic functions for vectors can be used.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="working-with-data-frames.html#cb166-1" tabindex="-1"></a><span class="co">#quantiles for the hp variable</span></span>
<span id="cb166-2"><a href="working-with-data-frames.html#cb166-2" tabindex="-1"></a><span class="fu">quantile</span>(cars_data<span class="sc">$</span>hp)</span></code></pre></div>
<pre><code>##    0%   25%   50%   75%  100% 
##  52.0  96.5 123.0 180.0 335.0</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="working-with-data-frames.html#cb168-1" tabindex="-1"></a><span class="co">#median value of cyl</span></span>
<span id="cb168-2"><a href="working-with-data-frames.html#cb168-2" tabindex="-1"></a><span class="fu">median</span>(cars_data<span class="sc">$</span>cyl)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>The dollar sign doesn’t just extract variables from the data, but can be used to create new variables as with data frames.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="working-with-data-frames.html#cb170-1" tabindex="-1"></a><span class="co">#create a variable for miles per litre by multiplying mpg by 0.22 (1 litre is </span></span>
<span id="cb170-2"><a href="working-with-data-frames.html#cb170-2" tabindex="-1"></a><span class="co">#approximately 0.22 gallons)</span></span>
<span id="cb170-3"><a href="working-with-data-frames.html#cb170-3" tabindex="-1"></a>cars_data<span class="sc">$</span>mpl <span class="ot">&lt;-</span> cars_data<span class="sc">$</span>mpg<span class="sc">*</span><span class="fl">0.22</span></span></code></pre></div>
</div>
<div id="attaching-data" class="section level3 hasAnchor" number="2.1.7">
<h3><span class="header-section-number">2.1.7</span> Attaching data<a href="working-with-data-frames.html#attaching-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with variables from one dataset in R, it can become tedious to always require the dollar sign, <code>$</code>, to access the variables. The function <code>attach()</code> in R stops the need for this through essentially copying each of the variables from the dataset into the Environment to be used freely, without needing to quote the dataset each time.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="working-with-data-frames.html#cb171-1" tabindex="-1"></a><span class="co">#cannot compute the mean of mpg from cars_data without extracting it first</span></span>
<span id="cb171-2"><a href="working-with-data-frames.html#cb171-2" tabindex="-1"></a><span class="fu">mean</span>(mpg)<span class="co">#returns error</span></span></code></pre></div>
<pre><code>## Error: object &#39;mpg&#39; not found</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="working-with-data-frames.html#cb173-1" tabindex="-1"></a><span class="fu">mean</span>(cars_data<span class="sc">$</span>mpg)<span class="co">#works</span></span></code></pre></div>
<pre><code>## [1] 20.09062</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="working-with-data-frames.html#cb175-1" tabindex="-1"></a><span class="co">#attach the dataset to the Environment</span></span>
<span id="cb175-2"><a href="working-with-data-frames.html#cb175-2" tabindex="-1"></a><span class="fu">attach</span>(cars_data) </span>
<span id="cb175-3"><a href="working-with-data-frames.html#cb175-3" tabindex="-1"></a></span>
<span id="cb175-4"><a href="working-with-data-frames.html#cb175-4" tabindex="-1"></a><span class="fu">mean</span>(mpg) <span class="co">#now works</span></span></code></pre></div>
<pre><code>## [1] 20.09062</code></pre>
<p>If you want to detach the data for any reason, for example if you want to attach another dataset, you can use the <code>detach()</code> function in R.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="working-with-data-frames.html#cb177-1" tabindex="-1"></a><span class="co">#detach data</span></span>
<span id="cb177-2"><a href="working-with-data-frames.html#cb177-2" tabindex="-1"></a><span class="fu">detach</span>(cars_data)</span>
<span id="cb177-3"><a href="working-with-data-frames.html#cb177-3" tabindex="-1"></a></span>
<span id="cb177-4"><a href="working-with-data-frames.html#cb177-4" tabindex="-1"></a><span class="fu">mean</span>(mpg) <span class="co">#now does not work again</span></span></code></pre></div>
<pre><code>## Error: object &#39;mpg&#39; not found</code></pre>
</div>
<div id="writing-data-to-external-repositories" class="section level3 hasAnchor" number="2.1.8">
<h3><span class="header-section-number">2.1.8</span> Writing data to external repositories<a href="working-with-data-frames.html#writing-data-to-external-repositories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Different data formats require different functions in R for exporting from R, with some formats requiring additional packages to allow for exportation. Since the data visible in the Environment (pane 4) is stored in the RAM, and not in the physical memory, it is important that any data you wish to save is written to an external repository, such as writing the data to a <code>.csv</code> file, otherwise it is erased when the R session ends. The key functions used to write the data as the different (common) data types are given in the table below with examples in the code that follows.</p>
<div style="width: 100%; text-align: center; display: flex; justify-content: center;">
<table style="width:81%;">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th></th>
<th></th>
</tr>
<tr class="even">
<th>Data type</th>
<th>Function</th>
<th>Package required</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.csv</code></td>
<td><code>write.csv()</code></td>
<td>none (in <code>base</code>)</td>
</tr>
<tr class="even">
<td><code>.txt</code>, text files</td>
<td><code>write.table()</code></td>
<td>none (in <code>base</code>)</td>
</tr>
<tr class="odd">
<td><code>.xslx</code>, excel
workbook</td>
<td><code>write.xlsx()</code></td>
<td><code>writexl</code></td>
</tr>
<tr class="even">
<td><code>.dta</code>, STATA
files</td>
<td><code>write.dta()</code></td>
<td><code>foreign</code></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="working-with-data-frames.html#cb179-1" tabindex="-1"></a><span class="co">#export a .csv file </span></span>
<span id="cb179-2"><a href="working-with-data-frames.html#cb179-2" tabindex="-1"></a><span class="fu">write.csv</span>(sample_data, <span class="st">&quot;exported_data.csv&quot;</span>)</span>
<span id="cb179-3"><a href="working-with-data-frames.html#cb179-3" tabindex="-1"></a></span>
<span id="cb179-4"><a href="working-with-data-frames.html#cb179-4" tabindex="-1"></a><span class="co">#export a text or .txt file </span></span>
<span id="cb179-5"><a href="working-with-data-frames.html#cb179-5" tabindex="-1"></a><span class="fu">write.table</span>(sample_data, <span class="st">&quot;exported_data.txt&quot;</span>)</span>
<span id="cb179-6"><a href="working-with-data-frames.html#cb179-6" tabindex="-1"></a></span>
<span id="cb179-7"><a href="working-with-data-frames.html#cb179-7" tabindex="-1"></a><span class="co">#export an Excel file </span></span>
<span id="cb179-8"><a href="working-with-data-frames.html#cb179-8" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;writexl&quot;</span>) </span>
<span id="cb179-9"><a href="working-with-data-frames.html#cb179-9" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb179-10"><a href="working-with-data-frames.html#cb179-10" tabindex="-1"></a><span class="fu">write_xlsx</span>(sample_data, <span class="st">&quot;exported_data.xlsx&quot;</span>)</span>
<span id="cb179-11"><a href="working-with-data-frames.html#cb179-11" tabindex="-1"></a></span>
<span id="cb179-12"><a href="working-with-data-frames.html#cb179-12" tabindex="-1"></a><span class="co">#export a STATA file </span></span>
<span id="cb179-13"><a href="working-with-data-frames.html#cb179-13" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;foreign&quot;</span>) </span>
<span id="cb179-14"><a href="working-with-data-frames.html#cb179-14" tabindex="-1"></a><span class="fu">library</span>(foreign) </span>
<span id="cb179-15"><a href="working-with-data-frames.html#cb179-15" tabindex="-1"></a><span class="fu">write.dta</span>(sample_data, <span class="st">&quot;exported_data.dta&quot;</span>)</span></code></pre></div>
<p>Note: The entire R Environment can be saved using the <code>save.image()</code> function or by clicking on the “save icon” (floppy disk icon) on the toolbar of the Environment window (pane 4) and selecting where you wish to save the <code>.Rdata</code> in the pop-up window.</p>
</div>
</div>
<div id="basic-data-wrangling-methods-for-data-preparation-and-handling-in-r" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Basic data wrangling methods for data preparation and handling in R<a href="working-with-data-frames.html#basic-data-wrangling-methods-for-data-preparation-and-handling-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="dealing-with-na-not-available-values" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Dealing with NA (‘Not Available’) values<a href="working-with-data-frames.html#dealing-with-na-not-available-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>NA</code> is typically used to represent for missing (‘Not Available’) values in R, and is an important concept, particularly as R replaces missing values with <code>NA</code> (and replaces impossible values, such as when dividing by zero, with <code>NaN</code>).</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="working-with-data-frames.html#cb180-1" tabindex="-1"></a><span class="co">#import population data</span></span>
<span id="cb180-2"><a href="working-with-data-frames.html#cb180-2" tabindex="-1"></a>Pop_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path, <span class="st">&quot;sim_population.csv&quot;</span>), </span>
<span id="cb180-3"><a href="working-with-data-frames.html#cb180-3" tabindex="-1"></a>                     <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb180-4"><a href="working-with-data-frames.html#cb180-4" tabindex="-1"></a><span class="co">#variable for gdp contains missing values, first 50 values</span></span>
<span id="cb180-5"><a href="working-with-data-frames.html#cb180-5" tabindex="-1"></a>Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>]</span></code></pre></div>
<pre><code>##  [1]  8  6  2  2 10  2 10  7  9  9  3  9  9  8  3 12 NA  2  6  3 NA  4 NA  8  8  1  9 14  6 15  7 10  2  8
## [35]  2 14  5  6  7 12 12  1  3  4 15  4  3 13  7  8</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="working-with-data-frames.html#cb182-1" tabindex="-1"></a><span class="co">#trying to sum the elements of the variable does not work as R cannot deal with</span></span>
<span id="cb182-2"><a href="working-with-data-frames.html#cb182-2" tabindex="-1"></a><span class="co">#the missing value</span></span>
<span id="cb182-3"><a href="working-with-data-frames.html#cb182-3" tabindex="-1"></a><span class="fu">sum</span>(Pop_data<span class="sc">$</span>gdp)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>If there is missing data in the variable/vector that you are trying to work with, the function <code>na.rm = TRUE</code> can be applied, which removes the missing data from the variable/vector you are working with.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="working-with-data-frames.html#cb184-1" tabindex="-1"></a><span class="co">#remove NA values for sum</span></span>
<span id="cb184-2"><a href="working-with-data-frames.html#cb184-2" tabindex="-1"></a><span class="fu">sum</span>(Pop_data<span class="sc">$</span>gdp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 10831</code></pre>
<p>To identify which elements are missing from an R object, the function <code>is.na()</code> can be used, where the argument is chosen to be the object of interest. If you would like to know how many missing values there are, you can use the <code>sum()</code> function in addition to the <code>is.na()</code> function as shown below.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="working-with-data-frames.html#cb186-1" tabindex="-1"></a><span class="co">#identify the missing values in the gdp variable (first 50 values)</span></span>
<span id="cb186-2"><a href="working-with-data-frames.html#cb186-2" tabindex="-1"></a><span class="fu">is.na</span>(Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [18] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [35] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="working-with-data-frames.html#cb188-1" tabindex="-1"></a><span class="co">#how many missing values in first 50 values?</span></span>
<span id="cb188-2"><a href="working-with-data-frames.html#cb188-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>]))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Alternatively, if you would like to know which of the values are complete (not missing), the function <code>complete.cases()</code> can be used in the same way, but returns a logical vector indicating which of the elements which are complete.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="working-with-data-frames.html#cb190-1" tabindex="-1"></a><span class="co">#identify the missing values in the gdp variable (first 50 values)</span></span>
<span id="cb190-2"><a href="working-with-data-frames.html#cb190-2" tabindex="-1"></a><span class="fu">complete.cases</span>(Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
## [18]  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [35]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="working-with-data-frames.html#cb192-1" tabindex="-1"></a><span class="co">#how many missing values in first 50 values?</span></span>
<span id="cb192-2"><a href="working-with-data-frames.html#cb192-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">complete.cases</span>(Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>]))</span></code></pre></div>
<pre><code>## [1] 47</code></pre>
<p>Another useful function is the <code>na.omit()</code> function, which instead of returning a logical vector identifying which values are complete or missing, it returns the object with the missing values removed.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="working-with-data-frames.html#cb194-1" tabindex="-1"></a><span class="co">#remove the missing values</span></span>
<span id="cb194-2"><a href="working-with-data-frames.html#cb194-2" tabindex="-1"></a>gdp_na_omit <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(Pop_data<span class="sc">$</span>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span>
<span id="cb194-3"><a href="working-with-data-frames.html#cb194-3" tabindex="-1"></a>gdp_na_omit</span></code></pre></div>
<pre><code>##  [1]  8  6  2  2 10  2 10  7  9  9  3  9  9  8  3 12  2  6  3  4  8  8  1  9 14  6 15  7 10  2  8  2 14  5
## [35]  6  7 12 12  1  3  4 15  4  3 13  7  8
## attr(,&quot;na.action&quot;)
## [1] 17 21 23
## attr(,&quot;class&quot;)
## [1] &quot;omit&quot;</code></pre>
<p>To quickly identify if there are missing values in your data frame/object, the <code>na.fail()</code> function can be used. With this function, if the object included as the argument contains any missing values, it will signal an error, however, if there are no missing values, the object is returned.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="working-with-data-frames.html#cb196-1" tabindex="-1"></a><span class="co">#check for missing values</span></span>
<span id="cb196-2"><a href="working-with-data-frames.html#cb196-2" tabindex="-1"></a><span class="co">#na.fail(Pop_data$gdp[1:50]) #returns an error</span></span>
<span id="cb196-3"><a href="working-with-data-frames.html#cb196-3" tabindex="-1"></a><span class="fu">na.fail</span>(gdp_na_omit) <span class="co">#returns an error</span></span></code></pre></div>
<pre><code>##  [1]  8  6  2  2 10  2 10  7  9  9  3  9  9  8  3 12  2  6  3  4  8  8  1  9 14  6 15  7 10  2  8  2 14  5
## [35]  6  7 12 12  1  3  4 15  4  3 13  7  8
## attr(,&quot;na.action&quot;)
## [1] 17 21 23
## attr(,&quot;class&quot;)
## [1] &quot;omit&quot;</code></pre>
</div>
<div id="key-data-wrangling-methods" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Key data wrangling methods<a href="working-with-data-frames.html#key-data-wrangling-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some key data manipulation can be done using the following functions in <code>base</code>, <code>stats</code>, <code>dplyr</code> and <code>tidyr</code> packages.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="working-with-data-frames.html#cb198-1" tabindex="-1"></a><span class="co">#install dplyr and tidyr packages </span></span>
<span id="cb198-2"><a href="working-with-data-frames.html#cb198-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb198-3"><a href="working-with-data-frames.html#cb198-3" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="working-with-data-frames.html#cb199-1" tabindex="-1"></a><span class="co">#load the dplyr and tidyr packages</span></span>
<span id="cb199-2"><a href="working-with-data-frames.html#cb199-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb199-3"><a href="working-with-data-frames.html#cb199-3" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code></pre></div>
<div style="width: 100%; text-align: center; display: flex; justify-content: center;">
<table style="width:78%;">
<colgroup>
<col width="26%" />
<col width="27%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th></th>
<th></th>
</tr>
<tr class="even">
<th>Function</th>
<th>Description</th>
<th>Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>aggregate()</code></td>
<td>obtain summary
statistics by
group</td>
<td><code>stats</code></td>
</tr>
<tr class="even">
<td><code>arrange()</code></td>
<td>duplicate existing
variable in the
data with new name</td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>drop_na()</code></td>
<td>remove all columns
with NA</td>
<td><code>tidyr</code></td>
</tr>
<tr class="even">
<td><code>filter()</code></td>
<td>Select rows based
on certain
conditions</td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>gather()</code></td>
<td>convert to long
format</td>
<td><code>tidyr</code></td>
</tr>
<tr class="even">
<td><code>group_by()</code></td>
<td>group the rows of
a data frame by
one or more
variables</td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>merge()</code></td>
<td>join two datasets</td>
<td><code>base</code></td>
</tr>
<tr class="even">
<td><code>mutate()</code></td>
<td>add new columns
to a data frame
based on existing
columns</td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>select()</code></td>
<td>choose specific
columns to work
with</td>
<td><code>dplyr</code></td>
</tr>
<tr class="even">
<td><code>spread()</code></td>
<td>convert to wide
format</td>
<td><code>tidyr</code></td>
</tr>
<tr class="odd">
<td><code>subset()</code></td>
<td>subset data by
given
specifications</td>
<td><code>base</code></td>
</tr>
<tr class="even">
<td><code>summarise()</code>/
<code>summarize()</code></td>
<td>compute summary
statistics for
each group created
by <code>group_by()</code></td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>rename()</code></td>
<td>change the names
of columns in a
data frame</td>
<td><code>dplyr</code></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>The <strong>pipe</strong> operator, <code>%&gt;%</code>, from the <code>magritr</code> package allows for a sequence of operations to be carried out simultaneously. R offers a built in native pipe, <code>|&gt;</code>, which works in a similar way and can be faster for longer computations. The main difference between the functions is that <code>%&gt;%</code> does not require parentheses (brackets) when calling functions, whereas for <code>|&gt;</code>, the parentheses are always necessary. The <code>with()</code> function in <code>base</code> R performs similar actions.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="working-with-data-frames.html#cb200-1" tabindex="-1"></a><span class="co">#rename dataset and remove NA values</span></span>
<span id="cb200-2"><a href="working-with-data-frames.html#cb200-2" tabindex="-1"></a>Pop_data_pipe <span class="ot">&lt;-</span> Pop_data <span class="sc">%&gt;%</span> </span>
<span id="cb200-3"><a href="working-with-data-frames.html#cb200-3" tabindex="-1"></a>  <span class="fu">drop_na</span>() </span>
<span id="cb200-4"><a href="working-with-data-frames.html#cb200-4" tabindex="-1"></a><span class="fu">head</span>(Pop_data_pipe)</span></code></pre></div>
<pre><code>##   ID pop precipitation_mean temperature_mean elevation     slope region buildings gdp
## 1  1 164           1581.950         24.00823 650.27273 0.9090909      1       250   8
## 2  2 192           1628.924         25.07551 364.75000 1.5000000      5       374   6
## 3  3 203           1072.788         25.11997 107.63636 3.5454545      2       418   2
## 4  4 206           1219.166         25.29793 340.75000 1.5000000      2       327   2
## 5  5 226           1117.308         25.17577  90.68421 6.5263158      2       443  10
## 6  6 229           1401.864         25.61566 305.71429 7.2857143      1       503   2</code></pre>
<p>Subset rows based on certain conditions.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="working-with-data-frames.html#cb202-1" tabindex="-1"></a><span class="co">#subset observations with a population of more than 10 million people</span></span>
<span id="cb202-2"><a href="working-with-data-frames.html#cb202-2" tabindex="-1"></a>Pop_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(pop<span class="sc">&gt;=</span><span class="dv">2000</span>)</span></code></pre></div>
<pre><code>##    ID  pop precipitation_mean temperature_mean elevation     slope region buildings gdp
## 1 914 2008           1432.101         25.85989  300.5000 1.3750000      1      3061  NA
## 2 915 2047           1469.931         25.95289  292.1111 0.4444444      1      3897  73
## 3 916 2174           1437.897         25.88929  307.3333 1.1111111      1      4440  48
## 4 917 2233           1425.850         25.84749  317.0000 2.0000000      1      4766  22
## 5 918 2329           1420.629         25.82820  308.8750 2.3750000      1      5294  NA
## 6 919 2369           1425.794         25.84525  308.5833 1.3333333      1      4923  NA</code></pre>
<p>Select certain variables.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="working-with-data-frames.html#cb204-1" tabindex="-1"></a><span class="co">#select the variables state and total</span></span>
<span id="cb204-2"><a href="working-with-data-frames.html#cb204-2" tabindex="-1"></a><span class="fu">head</span>(Pop_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(region, pop))</span></code></pre></div>
<pre><code>##   region pop
## 1      1 164
## 2      5 192
## 3      2 203
## 4      2 206
## 5      2 226
## 6      1 229</code></pre>
<p>Group observations by variable and summarise by property.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="working-with-data-frames.html#cb206-1" tabindex="-1"></a><span class="co">#group the observations by region and summarise their population per region</span></span>
<span id="cb206-2"><a href="working-with-data-frames.html#cb206-2" tabindex="-1"></a>Pop_data<span class="sc">%&gt;%</span></span>
<span id="cb206-3"><a href="working-with-data-frames.html#cb206-3" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span>  </span>
<span id="cb206-4"><a href="working-with-data-frames.html#cb206-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">regional_population =</span> <span class="fu">sum</span>(pop))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   region regional_population
##    &lt;int&gt;               &lt;int&gt;
## 1      1              270962
## 2      2              113832
## 3      3               90361
## 4      4               45677
## 5      5               34583</code></pre>
<p>Adding another variable.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="working-with-data-frames.html#cb208-1" tabindex="-1"></a><span class="co">#add another variable called density = total/buildings</span></span>
<span id="cb208-2"><a href="working-with-data-frames.html#cb208-2" tabindex="-1"></a>Pop_data <span class="ot">&lt;-</span> Pop_data <span class="sc">%&gt;%</span> </span>
<span id="cb208-3"><a href="working-with-data-frames.html#cb208-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">density =</span> pop<span class="sc">/</span>buildings)</span></code></pre></div>
<p>Renaming variables.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="working-with-data-frames.html#cb209-1" tabindex="-1"></a><span class="co">#rename density to population_density</span></span>
<span id="cb209-2"><a href="working-with-data-frames.html#cb209-2" tabindex="-1"></a>Pop_data<span class="ot">&lt;-</span> Pop_data <span class="sc">%&gt;%</span>  </span>
<span id="cb209-3"><a href="working-with-data-frames.html#cb209-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Pop_density =</span> density)</span></code></pre></div>
<p>Sort data into ascending or descending order.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="working-with-data-frames.html#cb210-1" tabindex="-1"></a><span class="co">#sort data by ascending order of ID</span></span>
<span id="cb210-2"><a href="working-with-data-frames.html#cb210-2" tabindex="-1"></a>Pop_data_arranged_asc <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Pop_data, ID)</span>
<span id="cb210-3"><a href="working-with-data-frames.html#cb210-3" tabindex="-1"></a></span>
<span id="cb210-4"><a href="working-with-data-frames.html#cb210-4" tabindex="-1"></a><span class="co">#sort data by descending order of ID</span></span>
<span id="cb210-5"><a href="working-with-data-frames.html#cb210-5" tabindex="-1"></a>Pop_data_arranged_desc <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Pop_data, <span class="fu">desc</span>(ID))</span></code></pre></div>
</div>
</div>
<div id="data-visualisation" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Data visualisation<a href="working-with-data-frames.html#data-visualisation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data visualisation is important as it forms part of the exploratory data analyses, enabling a quick and easy understanding of the dataset. It also enables for patterns to be detected and can be a useful tool for communicating results to non-experts. Data visualisation is also crucial to data exploration.</p>
<p>For using <code>base</code> R data visualisation functions, with functions such as <code>plot()</code>, <code>boxplot()</code>, and <code>hist()</code>, the following arguments are useful for customisation of the plots, often making the plots easier to understand.</p>
<div style="width: 100%; text-align: center; display: flex; justify-content: center;">
<table style="width:53%;">
<colgroup>
<col width="26%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th></th>
</tr>
<tr class="even">
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>main</code></td>
<td>an overall title</td>
</tr>
<tr class="even">
<td><code>xlab</code></td>
<td>a title for the
<span class="math inline">\(x\)</span>-axis</td>
</tr>
<tr class="odd">
<td><code>ylab</code></td>
<td>a title for the
<span class="math inline">\(y\)</span>-axis</td>
</tr>
<tr class="even">
<td><code>sub</code></td>
<td>a sub-title</td>
</tr>
<tr class="odd">
<td><code>type</code></td>
<td>determines the
type of plot
e.g. “<code>p</code>” for
points, “<code>l</code>” for
lines</td>
</tr>
<tr class="even">
<td><code>pch</code></td>
<td>determines type
of symbol to be
used for points</td>
</tr>
<tr class="odd">
<td><code>col</code></td>
<td>colour of plot</td>
</tr>
<tr class="even">
<td><code>lty</code></td>
<td>determines the
type of line e.g.
“<code>1</code>” for solid,
“<code>2</code>” for dashed</td>
</tr>
<tr class="odd">
<td><code>lwd</code></td>
<td>determines width
of the line</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>Further arguments for graphical parameters can be found by going to the help file for <code>par</code> (<code>?par</code>).</p>
<p>The <code>ggplot2</code> and <code>ggpubr</code> packages can be used instead of <code>base</code> R to create more elegant plots.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="working-with-data-frames.html#cb211-1" tabindex="-1"></a><span class="co">#install ggplot2 and ggpubr packages</span></span>
<span id="cb211-2"><a href="working-with-data-frames.html#cb211-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb211-3"><a href="working-with-data-frames.html#cb211-3" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggpubr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="working-with-data-frames.html#cb212-1" tabindex="-1"></a><span class="co">#load the ggplot2 and ggpubr packages</span></span>
<span id="cb212-2"><a href="working-with-data-frames.html#cb212-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb212-3"><a href="working-with-data-frames.html#cb212-3" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span></code></pre></div>
<div id="bar-plots" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Bar plots<a href="working-with-data-frames.html#bar-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A bar plot can be useful for discrete data.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="working-with-data-frames.html#cb213-1" tabindex="-1"></a><span class="co">#create a vector which has the values of total population by region</span></span>
<span id="cb213-2"><a href="working-with-data-frames.html#cb213-2" tabindex="-1"></a>regional_population <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb213-3"><a href="working-with-data-frames.html#cb213-3" tabindex="-1"></a><span class="cf">for</span>(r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb213-4"><a href="working-with-data-frames.html#cb213-4" tabindex="-1"></a>  regional_population[r] <span class="ot">&lt;-</span> <span class="fu">sum</span>(Pop_data<span class="sc">$</span>pop[Pop_data<span class="sc">$</span>region <span class="sc">==</span> r])</span>
<span id="cb213-5"><a href="working-with-data-frames.html#cb213-5" tabindex="-1"></a>}</span>
<span id="cb213-6"><a href="working-with-data-frames.html#cb213-6" tabindex="-1"></a></span>
<span id="cb213-7"><a href="working-with-data-frames.html#cb213-7" tabindex="-1"></a><span class="co">#plot the bar plot using base R</span></span>
<span id="cb213-8"><a href="working-with-data-frames.html#cb213-8" tabindex="-1"></a><span class="fu">barplot</span>(regional_population,</span>
<span id="cb213-9"><a href="working-with-data-frames.html#cb213-9" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population Total&quot;</span>, </span>
<span id="cb213-10"><a href="working-with-data-frames.html#cb213-10" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb213-11"><a href="working-with-data-frames.html#cb213-11" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;#004C92&quot;</span>,</span>
<span id="cb213-12"><a href="working-with-data-frames.html#cb213-12" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Bar Plot of Population by Region&quot;</span>,</span>
<span id="cb213-13"><a href="working-with-data-frames.html#cb213-13" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb213-14"><a href="working-with-data-frames.html#cb213-14" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/barplot%20discrete-1.png" width="672" /></p>
<p>Using the function <code>ggplot()</code> with the argument <code>geom_bar()</code> creates a bar plot. The following example is the same plot as above, but with the depicted information easier to understand.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="working-with-data-frames.html#cb214-1" tabindex="-1"></a><span class="co">#bar plot of population by region</span></span>
<span id="cb214-2"><a href="working-with-data-frames.html#cb214-2" tabindex="-1"></a>barplot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> pop, <span class="at">fill =</span> pop)) <span class="sc">+</span></span>
<span id="cb214-3"><a href="working-with-data-frames.html#cb214-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb214-4"><a href="working-with-data-frames.html#cb214-4" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb214-5"><a href="working-with-data-frames.html#cb214-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;States&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Population Total&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Total&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb214-6"><a href="working-with-data-frames.html#cb214-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Bar Plot of Population by Region&quot;</span>)</span>
<span id="cb214-7"><a href="working-with-data-frames.html#cb214-7" tabindex="-1"></a></span>
<span id="cb214-8"><a href="working-with-data-frames.html#cb214-8" tabindex="-1"></a><span class="co">#use the ggpar function to customise plot </span></span>
<span id="cb214-9"><a href="working-with-data-frames.html#cb214-9" tabindex="-1"></a><span class="fu">ggpar</span>(barplot1, <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Population Total&quot;</span>,</span>
<span id="cb214-10"><a href="working-with-data-frames.html#cb214-10" tabindex="-1"></a>      <span class="at">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="at">legend.title =</span> <span class="st">&quot;Total&quot;</span>,</span>
<span id="cb214-11"><a href="working-with-data-frames.html#cb214-11" tabindex="-1"></a>      <span class="at">font.x =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb214-12"><a href="working-with-data-frames.html#cb214-12" tabindex="-1"></a>      <span class="at">font.y =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb214-13"><a href="working-with-data-frames.html#cb214-13" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2 and ggpubr&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/barplots%20ggplot-1.png" width="672" /></p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="working-with-data-frames.html#cb215-1" tabindex="-1"></a><span class="co">#import the age dataset</span></span>
<span id="cb215-2"><a href="working-with-data-frames.html#cb215-2" tabindex="-1"></a>Age_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path, <span class="st">&quot;Age_data.csv&quot;</span>), <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb215-3"><a href="working-with-data-frames.html#cb215-3" tabindex="-1"></a></span>
<span id="cb215-4"><a href="working-with-data-frames.html#cb215-4" tabindex="-1"></a><span class="co">#convert the age groups variable into a factor</span></span>
<span id="cb215-5"><a href="working-with-data-frames.html#cb215-5" tabindex="-1"></a>Age_data<span class="sc">$</span>age_groups <span class="ot">&lt;-</span> <span class="fu">factor</span>(Age_data<span class="sc">$</span>age_groups,</span>
<span id="cb215-6"><a href="working-with-data-frames.html#cb215-6" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;0-4&quot;</span>, <span class="st">&quot;5 - 12&quot;</span>, <span class="st">&quot;13 - 18&quot;</span>, </span>
<span id="cb215-7"><a href="working-with-data-frames.html#cb215-7" tabindex="-1"></a>                                         <span class="st">&quot;19 - 24&quot;</span>, <span class="st">&quot;25 - 34&quot;</span>, <span class="st">&quot;35 - 44&quot;</span>, </span>
<span id="cb215-8"><a href="working-with-data-frames.html#cb215-8" tabindex="-1"></a>                                         <span class="st">&quot;45 - 54&quot;</span>, <span class="st">&quot;55 - 64&quot;</span>, <span class="st">&quot;65 - 74&quot;</span>,</span>
<span id="cb215-9"><a href="working-with-data-frames.html#cb215-9" tabindex="-1"></a>                                         <span class="st">&quot;75 - 84&quot;</span>, <span class="st">&quot;85 - 94&quot;</span>, <span class="st">&quot;95+&quot;</span>))</span>
<span id="cb215-10"><a href="working-with-data-frames.html#cb215-10" tabindex="-1"></a></span>
<span id="cb215-11"><a href="working-with-data-frames.html#cb215-11" tabindex="-1"></a><span class="co">#convert data into long format</span></span>
<span id="cb215-12"><a href="working-with-data-frames.html#cb215-12" tabindex="-1"></a>age_long <span class="ot">&lt;-</span> <span class="fu">gather</span>(Age_data, Sex, Pop,females <span class="sc">:</span> males)</span>
<span id="cb215-13"><a href="working-with-data-frames.html#cb215-13" tabindex="-1"></a>age_long<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;ID&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(age_long))</span></code></pre></div>
<p>A type of bar plots are descending and ascending bar plots, displaying the data in order of descending or ascending order of the <span class="math inline">\(y\)</span> variable rather than the given order of the <span class="math inline">\(x\)</span> variable.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="working-with-data-frames.html#cb216-1" tabindex="-1"></a><span class="co">#making descending and ascending bar plots</span></span>
<span id="cb216-2"><a href="working-with-data-frames.html#cb216-2" tabindex="-1"></a></span>
<span id="cb216-3"><a href="working-with-data-frames.html#cb216-3" tabindex="-1"></a><span class="co">#descending order</span></span>
<span id="cb216-4"><a href="working-with-data-frames.html#cb216-4" tabindex="-1"></a>barplot_descending <span class="ot">&lt;-</span> <span class="fu">ggbarplot</span>(age_long, <span class="at">x =</span> <span class="st">&quot;ID&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Pop&quot;</span>,</span>
<span id="cb216-5"><a href="working-with-data-frames.html#cb216-5" tabindex="-1"></a>                                <span class="at">fill =</span> <span class="st">&quot;Sex&quot;</span>, </span>
<span id="cb216-6"><a href="working-with-data-frames.html#cb216-6" tabindex="-1"></a>                                <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb216-7"><a href="working-with-data-frames.html#cb216-7" tabindex="-1"></a>                                <span class="at">palette =</span> <span class="st">&quot;jco&quot;</span>,</span>
<span id="cb216-8"><a href="working-with-data-frames.html#cb216-8" tabindex="-1"></a>                                <span class="at">sort.val =</span> <span class="st">&quot;desc&quot;</span>,        </span>
<span id="cb216-9"><a href="working-with-data-frames.html#cb216-9" tabindex="-1"></a>                                <span class="at">sort.by.groups =</span> <span class="cn">FALSE</span>, </span>
<span id="cb216-10"><a href="working-with-data-frames.html#cb216-10" tabindex="-1"></a>                                <span class="at">x.text.angle =</span> <span class="dv">90</span>,</span>
<span id="cb216-11"><a href="working-with-data-frames.html#cb216-11" tabindex="-1"></a>                                <span class="at">main =</span> <span class="st">&quot;Descending Bar Plot of Population by Sex&quot;</span>,</span>
<span id="cb216-12"><a href="working-with-data-frames.html#cb216-12" tabindex="-1"></a>                                <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span></span>
<span id="cb216-13"><a href="working-with-data-frames.html#cb216-13" tabindex="-1"></a>)</span>
<span id="cb216-14"><a href="working-with-data-frames.html#cb216-14" tabindex="-1"></a></span>
<span id="cb216-15"><a href="working-with-data-frames.html#cb216-15" tabindex="-1"></a><span class="co">#use the ggpar function to customise plot </span></span>
<span id="cb216-16"><a href="working-with-data-frames.html#cb216-16" tabindex="-1"></a>barplot_descending2 <span class="ot">&lt;-</span> <span class="fu">ggpar</span>(barplot_descending, </span>
<span id="cb216-17"><a href="working-with-data-frames.html#cb216-17" tabindex="-1"></a>                             <span class="at">xlab =</span> <span class="st">&quot;Subject ID&quot;</span>, </span>
<span id="cb216-18"><a href="working-with-data-frames.html#cb216-18" tabindex="-1"></a>                             <span class="at">ylab =</span> <span class="st">&quot;Population Count&quot;</span>,</span>
<span id="cb216-19"><a href="working-with-data-frames.html#cb216-19" tabindex="-1"></a>                             <span class="at">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="at">legend.title =</span> <span class="st">&quot;Gender&quot;</span>,</span>
<span id="cb216-20"><a href="working-with-data-frames.html#cb216-20" tabindex="-1"></a>                             <span class="at">font.label =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, </span>
<span id="cb216-21"><a href="working-with-data-frames.html#cb216-21" tabindex="-1"></a>                                               <span class="at">color =</span> <span class="st">&quot;red&quot;</span>),</span>
<span id="cb216-22"><a href="working-with-data-frames.html#cb216-22" tabindex="-1"></a>                             <span class="at">font.x =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb216-23"><a href="working-with-data-frames.html#cb216-23" tabindex="-1"></a>                             <span class="at">font.y =</span> <span class="fu">c</span>(<span class="dv">16</span>))</span>
<span id="cb216-24"><a href="working-with-data-frames.html#cb216-24" tabindex="-1"></a>barplot_descending2</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/descending%20and%20ascending%20bar%20plots-1.png" width="672" /></p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="working-with-data-frames.html#cb217-1" tabindex="-1"></a><span class="co">#ascending order</span></span>
<span id="cb217-2"><a href="working-with-data-frames.html#cb217-2" tabindex="-1"></a>barplot_ascending <span class="ot">&lt;-</span> <span class="fu">ggbarplot</span>(age_long, <span class="at">x =</span> <span class="st">&quot;ID&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Pop&quot;</span>,</span>
<span id="cb217-3"><a href="working-with-data-frames.html#cb217-3" tabindex="-1"></a>                               <span class="at">fill =</span> <span class="st">&quot;Sex&quot;</span>,              </span>
<span id="cb217-4"><a href="working-with-data-frames.html#cb217-4" tabindex="-1"></a>                               <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,        </span>
<span id="cb217-5"><a href="working-with-data-frames.html#cb217-5" tabindex="-1"></a>                               <span class="at">palette =</span> <span class="st">&quot;jco&quot;</span>,         </span>
<span id="cb217-6"><a href="working-with-data-frames.html#cb217-6" tabindex="-1"></a>                               <span class="at">sort.val =</span> <span class="st">&quot;asc&quot;</span>,        </span>
<span id="cb217-7"><a href="working-with-data-frames.html#cb217-7" tabindex="-1"></a>                               <span class="at">sort.by.groups =</span> <span class="cn">FALSE</span>,  </span>
<span id="cb217-8"><a href="working-with-data-frames.html#cb217-8" tabindex="-1"></a>                               <span class="at">x.text.angle =</span> <span class="dv">90</span>,      </span>
<span id="cb217-9"><a href="working-with-data-frames.html#cb217-9" tabindex="-1"></a>                               <span class="at">main =</span> <span class="st">&quot;Ascending Bar Plot of Population by Sex&quot;</span>,</span>
<span id="cb217-10"><a href="working-with-data-frames.html#cb217-10" tabindex="-1"></a>                               <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span></span>
<span id="cb217-11"><a href="working-with-data-frames.html#cb217-11" tabindex="-1"></a>)</span>
<span id="cb217-12"><a href="working-with-data-frames.html#cb217-12" tabindex="-1"></a></span>
<span id="cb217-13"><a href="working-with-data-frames.html#cb217-13" tabindex="-1"></a><span class="co">#use the ggpar function to customise plot </span></span>
<span id="cb217-14"><a href="working-with-data-frames.html#cb217-14" tabindex="-1"></a>barplot_ascending2 <span class="ot">&lt;-</span> <span class="fu">ggpar</span>(barplot_ascending, </span>
<span id="cb217-15"><a href="working-with-data-frames.html#cb217-15" tabindex="-1"></a>                            <span class="at">xlab =</span> <span class="st">&quot;Subject ID&quot;</span>, </span>
<span id="cb217-16"><a href="working-with-data-frames.html#cb217-16" tabindex="-1"></a>                            <span class="at">ylab =</span> <span class="st">&quot;Population Count&quot;</span>,</span>
<span id="cb217-17"><a href="working-with-data-frames.html#cb217-17" tabindex="-1"></a>                            <span class="at">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="at">legend.title =</span> <span class="st">&quot;Gender&quot;</span>,</span>
<span id="cb217-18"><a href="working-with-data-frames.html#cb217-18" tabindex="-1"></a>                            <span class="at">font.label =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, </span>
<span id="cb217-19"><a href="working-with-data-frames.html#cb217-19" tabindex="-1"></a>                                              <span class="at">color =</span> <span class="st">&quot;red&quot;</span>),</span>
<span id="cb217-20"><a href="working-with-data-frames.html#cb217-20" tabindex="-1"></a>                            <span class="at">font.x =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb217-21"><a href="working-with-data-frames.html#cb217-21" tabindex="-1"></a>                            <span class="at">font.y =</span> <span class="fu">c</span>(<span class="dv">16</span>))</span>
<span id="cb217-22"><a href="working-with-data-frames.html#cb217-22" tabindex="-1"></a></span>
<span id="cb217-23"><a href="working-with-data-frames.html#cb217-23" tabindex="-1"></a>barplot_ascending2</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/descending%20and%20ascending%20bar%20plots-2.png" width="672" /></p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="working-with-data-frames.html#cb218-1" tabindex="-1"></a><span class="co">#rotate plots</span></span>
<span id="cb218-2"><a href="working-with-data-frames.html#cb218-2" tabindex="-1"></a><span class="fu">ggbarplot</span>(age_long, <span class="at">x =</span> <span class="st">&quot;ID&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Pop&quot;</span>,</span>
<span id="cb218-3"><a href="working-with-data-frames.html#cb218-3" tabindex="-1"></a>          <span class="at">fill =</span> <span class="st">&quot;Sex&quot;</span>,           <span class="co"># change fill colour by mpg_level</span></span>
<span id="cb218-4"><a href="working-with-data-frames.html#cb218-4" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,            <span class="co"># Set bar border colours to white</span></span>
<span id="cb218-5"><a href="working-with-data-frames.html#cb218-5" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&quot;jco&quot;</span>,            <span class="co"># jco journal colour palette. see ?ggpar</span></span>
<span id="cb218-6"><a href="working-with-data-frames.html#cb218-6" tabindex="-1"></a>          <span class="at">sort.val =</span> <span class="st">&quot;desc&quot;</span>,          <span class="co"># Sort the value in descending order</span></span>
<span id="cb218-7"><a href="working-with-data-frames.html#cb218-7" tabindex="-1"></a>          <span class="at">sort.by.groups =</span> <span class="cn">FALSE</span>,     <span class="co"># Don&#39;t sort inside each group</span></span>
<span id="cb218-8"><a href="working-with-data-frames.html#cb218-8" tabindex="-1"></a>          <span class="at">x.text.angle =</span> <span class="dv">90</span>,          <span class="co"># Rotate vertically x axis texts</span></span>
<span id="cb218-9"><a href="working-with-data-frames.html#cb218-9" tabindex="-1"></a>          <span class="at">ylab =</span> <span class="st">&quot;Population Count&quot;</span>,</span>
<span id="cb218-10"><a href="working-with-data-frames.html#cb218-10" tabindex="-1"></a>          <span class="at">legend.title =</span> <span class="st">&quot;Sex&quot;</span>,</span>
<span id="cb218-11"><a href="working-with-data-frames.html#cb218-11" tabindex="-1"></a>          <span class="at">rotate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb218-12"><a href="working-with-data-frames.html#cb218-12" tabindex="-1"></a>          <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb218-13"><a href="working-with-data-frames.html#cb218-13" tabindex="-1"></a>          <span class="at">main =</span> <span class="st">&quot;Ascending Bar Plot of Population by Sex&quot;</span>,</span>
<span id="cb218-14"><a href="working-with-data-frames.html#cb218-14" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span></span>
<span id="cb218-15"><a href="working-with-data-frames.html#cb218-15" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/descending%20and%20ascending%20bar%20plots-3.png" width="672" /></p>
</div>
<div id="box-plots" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Box plots<a href="working-with-data-frames.html#box-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A box plot is the simplest plot for displaying continuous (numerical) data and can show the numerical data by category (for example, separate box plots for male vs female).</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="working-with-data-frames.html#cb219-1" tabindex="-1"></a><span class="co">#plot the box plot using base R</span></span>
<span id="cb219-2"><a href="working-with-data-frames.html#cb219-2" tabindex="-1"></a><span class="fu">boxplot</span>(Pop_data<span class="sc">$</span>pop<span class="sc">~</span>Pop_data<span class="sc">$</span>region,</span>
<span id="cb219-3"><a href="working-with-data-frames.html#cb219-3" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb219-4"><a href="working-with-data-frames.html#cb219-4" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb219-5"><a href="working-with-data-frames.html#cb219-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Box Plot of Population&quot;</span>)</span>
<span id="cb219-6"><a href="working-with-data-frames.html#cb219-6" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/box%20plots-1.png" width="672" /></p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="working-with-data-frames.html#cb220-1" tabindex="-1"></a><span class="co">#plot the box plot using ggplot</span></span>
<span id="cb220-2"><a href="working-with-data-frames.html#cb220-2" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> pop, <span class="at">group =</span> region, <span class="at">fill =</span> region)) <span class="sc">+</span></span>
<span id="cb220-3"><a href="working-with-data-frames.html#cb220-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="fu">c</span>(<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>, <span class="st">&quot;#009E73&quot;</span>, <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#0072B2&quot;</span>), </span>
<span id="cb220-4"><a href="working-with-data-frames.html#cb220-4" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb220-5"><a href="working-with-data-frames.html#cb220-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Population&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb220-6"><a href="working-with-data-frames.html#cb220-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Box Plot of Population&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/box%20plots-2.png" width="672" /></p>
</div>
<div id="histograms" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Histograms<a href="working-with-data-frames.html#histograms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alternatively, a histogram can be utilised, displaying the frequency distribution of a variable.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="working-with-data-frames.html#cb221-1" tabindex="-1"></a><span class="co">#plot the histogram using base R, adding titles in the same way as for bar plots, </span></span>
<span id="cb221-2"><a href="working-with-data-frames.html#cb221-2" tabindex="-1"></a><span class="co">#and changing the width of the bars.</span></span>
<span id="cb221-3"><a href="working-with-data-frames.html#cb221-3" tabindex="-1"></a><span class="fu">hist</span>(Pop_data<span class="sc">$</span>pop,</span>
<span id="cb221-4"><a href="working-with-data-frames.html#cb221-4" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of Population&quot;</span>, </span>
<span id="cb221-5"><a href="working-with-data-frames.html#cb221-5" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb221-6"><a href="working-with-data-frames.html#cb221-6" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram-1.png" width="672" /></p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="working-with-data-frames.html#cb222-1" tabindex="-1"></a><span class="co">#plot the histogram using ggplot</span></span>
<span id="cb222-2"><a href="working-with-data-frames.html#cb222-2" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> pop)) <span class="sc">+</span></span>
<span id="cb222-3"><a href="working-with-data-frames.html#cb222-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb222-4"><a href="working-with-data-frames.html#cb222-4" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb222-5"><a href="working-with-data-frames.html#cb222-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Population&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb222-6"><a href="working-with-data-frames.html#cb222-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Histogram of Population&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram-2.png" width="672" /></p>
<p>The <span class="math inline">\(x\)</span>-axis is split into ‘bins’ (or ‘cells’) and R counts the amount of times the variable is in each bin, with the width of each bar on the histogram changing depending on how many ‘bins’ there are. Some ‘bins’ are not visible due to being empty, for example, on the <code>ggplot2</code> histogram above, there are 10 ‘bins’ but 2 are empty so only 8 are visible.
Sometimes, the width of each of the bars is too wide or too narrow to be able to interpret the results effectively. In these instances, you can use the arguments <code>breaks =</code> for plotting with <code>base</code> R, and <code>bins =</code> for plotting with <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="working-with-data-frames.html#cb223-1" tabindex="-1"></a><span class="co">#plot the histogram using base R, changing the width of the bars.</span></span>
<span id="cb223-2"><a href="working-with-data-frames.html#cb223-2" tabindex="-1"></a><span class="fu">hist</span>(Pop_data<span class="sc">$</span>pop, </span>
<span id="cb223-3"><a href="working-with-data-frames.html#cb223-3" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>, </span>
<span id="cb223-4"><a href="working-with-data-frames.html#cb223-4" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of Population&quot;</span>, </span>
<span id="cb223-5"><a href="working-with-data-frames.html#cb223-5" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb223-6"><a href="working-with-data-frames.html#cb223-6" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram%202-1.png" width="672" /></p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="working-with-data-frames.html#cb224-1" tabindex="-1"></a><span class="co">#plot the histogram using ggplot</span></span>
<span id="cb224-2"><a href="working-with-data-frames.html#cb224-2" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> pop)) <span class="sc">+</span></span>
<span id="cb224-3"><a href="working-with-data-frames.html#cb224-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb224-4"><a href="working-with-data-frames.html#cb224-4" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb224-5"><a href="working-with-data-frames.html#cb224-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Population&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb224-6"><a href="working-with-data-frames.html#cb224-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Histogram of Population&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram%202-2.png" width="672" /></p>
<p>The histograms do not just have to display the frequency of the variable of interest. By adding the argument <code>freq = FALSE</code> to the <code>hist</code> function, the density of the variable of interest is plotted instead.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="working-with-data-frames.html#cb225-1" tabindex="-1"></a><span class="co">#plot the histogram using base R for density</span></span>
<span id="cb225-2"><a href="working-with-data-frames.html#cb225-2" tabindex="-1"></a><span class="fu">hist</span>(Pop_data<span class="sc">$</span>pop, </span>
<span id="cb225-3"><a href="working-with-data-frames.html#cb225-3" tabindex="-1"></a>     <span class="at">freq =</span> <span class="cn">FALSE</span>,</span>
<span id="cb225-4"><a href="working-with-data-frames.html#cb225-4" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>, </span>
<span id="cb225-5"><a href="working-with-data-frames.html#cb225-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of Population&quot;</span>, </span>
<span id="cb225-6"><a href="working-with-data-frames.html#cb225-6" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb225-7"><a href="working-with-data-frames.html#cb225-7" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram%20density-1.png" width="672" /></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="working-with-data-frames.html#cb226-1" tabindex="-1"></a><span class="co">#import height dataset</span></span>
<span id="cb226-2"><a href="working-with-data-frames.html#cb226-2" tabindex="-1"></a>Height_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">paste0</span>(data_path, <span class="st">&quot;Height_data.csv&quot;</span>),</span>
<span id="cb226-3"><a href="working-with-data-frames.html#cb226-3" tabindex="-1"></a>                        <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb226-4"><a href="working-with-data-frames.html#cb226-4" tabindex="-1"></a><span class="co"># Make histogram plot </span></span>
<span id="cb226-5"><a href="working-with-data-frames.html#cb226-5" tabindex="-1"></a>hist1 <span class="ot">&lt;-</span> <span class="fu">gghistogram</span>(Height_data, <span class="at">x =</span> <span class="st">&quot;Height&quot;</span>,                  </span>
<span id="cb226-6"><a href="working-with-data-frames.html#cb226-6" tabindex="-1"></a>                     <span class="at">add =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">rug =</span> <span class="cn">TRUE</span>,                  </span>
<span id="cb226-7"><a href="working-with-data-frames.html#cb226-7" tabindex="-1"></a>                     <span class="at">color =</span> <span class="st">&quot;Sex&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Sex&quot;</span>,                  </span>
<span id="cb226-8"><a href="working-with-data-frames.html#cb226-8" tabindex="-1"></a>                     <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#FF0000&quot;</span>, <span class="st">&quot;#FFC600&quot;</span>),</span>
<span id="cb226-9"><a href="working-with-data-frames.html#cb226-9" tabindex="-1"></a>                     <span class="at">bins =</span> <span class="dv">15</span>,</span>
<span id="cb226-10"><a href="working-with-data-frames.html#cb226-10" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">&quot;Height (cm)&quot;</span>,</span>
<span id="cb226-11"><a href="working-with-data-frames.html#cb226-11" tabindex="-1"></a>                     <span class="at">ylab =</span> <span class="st">&quot;Frequency&quot;</span>,</span>
<span id="cb226-12"><a href="working-with-data-frames.html#cb226-12" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">&quot;Histogram of Height by Sex&quot;</span>,</span>
<span id="cb226-13"><a href="working-with-data-frames.html#cb226-13" tabindex="-1"></a>                     <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span>) </span>
<span id="cb226-14"><a href="working-with-data-frames.html#cb226-14" tabindex="-1"></a>hist1</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/histogram%20ggpubr-1.png" width="672" /></p>
</div>
<div id="density-plots" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Density plots<a href="working-with-data-frames.html#density-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Density plots are smoothed histograms.
In <code>base</code> R, the function <code>density()</code> can be used to find the density of the variable of interest and be inserted straight into the <code>plot()</code> function.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="working-with-data-frames.html#cb227-1" tabindex="-1"></a><span class="co">#plot the density plot using base R</span></span>
<span id="cb227-2"><a href="working-with-data-frames.html#cb227-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(Pop_data<span class="sc">$</span>pop), </span>
<span id="cb227-3"><a href="working-with-data-frames.html#cb227-3" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Density plot of Population&quot;</span>,</span>
<span id="cb227-4"><a href="working-with-data-frames.html#cb227-4" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb227-5"><a href="working-with-data-frames.html#cb227-5" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Density&quot;</span>)</span>
<span id="cb227-6"><a href="working-with-data-frames.html#cb227-6" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/density%20plots-1.png" width="672" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="working-with-data-frames.html#cb228-1" tabindex="-1"></a><span class="co">#plot the density plot using ggplot</span></span>
<span id="cb228-2"><a href="working-with-data-frames.html#cb228-2" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> pop)) <span class="sc">+</span></span>
<span id="cb228-3"><a href="working-with-data-frames.html#cb228-3" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#004C92&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb228-4"><a href="working-with-data-frames.html#cb228-4" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="st">&quot;#004C92&quot;</span>) <span class="sc">+</span></span>
<span id="cb228-5"><a href="working-with-data-frames.html#cb228-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Population&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Density&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb228-6"><a href="working-with-data-frames.html#cb228-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Density Plot of Population&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/density%20plots-2.png" width="672" /></p>
<p>The function <code>ggdensity</code> within <code>ggpubr</code> can also be used for plotting the density of a variable, including plotting the density categorised by another variable, for example plotting the density of a population by ‘Sex’.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="working-with-data-frames.html#cb229-1" tabindex="-1"></a><span class="co">#make density plot </span></span>
<span id="cb229-2"><a href="working-with-data-frames.html#cb229-2" tabindex="-1"></a>density1 <span class="ot">&lt;-</span> <span class="fu">ggdensity</span>(Height_data, <span class="at">x =</span> <span class="st">&quot;Height&quot;</span>, </span>
<span id="cb229-3"><a href="working-with-data-frames.html#cb229-3" tabindex="-1"></a>                      <span class="at">add =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">rug =</span> <span class="cn">TRUE</span>, </span>
<span id="cb229-4"><a href="working-with-data-frames.html#cb229-4" tabindex="-1"></a>                      <span class="at">color =</span> <span class="st">&quot;Sex&quot;</span>, </span>
<span id="cb229-5"><a href="working-with-data-frames.html#cb229-5" tabindex="-1"></a>                      <span class="at">fill =</span> <span class="st">&quot;Sex&quot;</span>,          </span>
<span id="cb229-6"><a href="working-with-data-frames.html#cb229-6" tabindex="-1"></a>                      <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#FF0000&quot;</span>, <span class="st">&quot;#FFC600&quot;</span>),</span>
<span id="cb229-7"><a href="working-with-data-frames.html#cb229-7" tabindex="-1"></a>                      <span class="at">xlab =</span> <span class="st">&quot;Height (cm)&quot;</span>,</span>
<span id="cb229-8"><a href="working-with-data-frames.html#cb229-8" tabindex="-1"></a>                      <span class="at">ylab =</span> <span class="st">&quot;Density&quot;</span>,</span>
<span id="cb229-9"><a href="working-with-data-frames.html#cb229-9" tabindex="-1"></a>                      <span class="at">main =</span> <span class="st">&quot;Density Plot of Height by Sex&quot;</span>,</span>
<span id="cb229-10"><a href="working-with-data-frames.html#cb229-10" tabindex="-1"></a>                      <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span>)</span>
<span id="cb229-11"><a href="working-with-data-frames.html#cb229-11" tabindex="-1"></a>density1</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/density%20plot%20ggpubr-1.png" width="672" /></p>
</div>
<div id="scatter-plots" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Scatter plots<a href="working-with-data-frames.html#scatter-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scatter plots are useful for showing multivariate data, for investigating the relationship between two continuous variables.</p>
<p>A line of best fit can be added to the scatter plot, aiding in the visualisation of the relationship through using the functions <code>lm()</code> to model the relationship and <code>abline()</code> to add the line to the plot in <code>base</code> R. Alternatively, the function <code>geom_smooth()</code> can be used with argument <code>method = "lm"</code> for plotting with <code>ggplot2</code>.</p>
<p>Modelling the relationship between variables is discussed further and in more detail in Module 4.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="working-with-data-frames.html#cb230-1" tabindex="-1"></a><span class="co">#scatter plot of temperature and rainfall</span></span>
<span id="cb230-2"><a href="working-with-data-frames.html#cb230-2" tabindex="-1"></a><span class="fu">plot</span>(Pop_data<span class="sc">$</span>temperature_mean, Pop_data<span class="sc">$</span>precipitation_mean,</span>
<span id="cb230-3"><a href="working-with-data-frames.html#cb230-3" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb230-4"><a href="working-with-data-frames.html#cb230-4" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Rainfall&quot;</span>,</span>
<span id="cb230-5"><a href="working-with-data-frames.html#cb230-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Scatter Plot of Temperature and Rainfall&quot;</span>,</span>
<span id="cb230-6"><a href="working-with-data-frames.html#cb230-6" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">20</span>)</span>
<span id="cb230-7"><a href="working-with-data-frames.html#cb230-7" tabindex="-1"></a><span class="fu">mtext</span>(<span class="at">side =</span> <span class="dv">3</span>, <span class="st">&quot;Using base R&quot;</span>)</span>
<span id="cb230-8"><a href="working-with-data-frames.html#cb230-8" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>(precipitation_mean <span class="sc">~</span> temperature_mean, <span class="at">data =</span> Pop_data))</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/scatter%20plots-1.png" width="672" /></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="working-with-data-frames.html#cb231-1" tabindex="-1"></a><span class="co">#plot the scatter plot and fit a line using ggplot</span></span>
<span id="cb231-2"><a href="working-with-data-frames.html#cb231-2" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> temperature_mean, <span class="at">y =</span> precipitation_mean)) <span class="sc">+</span></span>
<span id="cb231-3"><a href="working-with-data-frames.html#cb231-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb231-4"><a href="working-with-data-frames.html#cb231-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb231-5"><a href="working-with-data-frames.html#cb231-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Temperature&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Rainfall&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb231-6"><a href="working-with-data-frames.html#cb231-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Scatter Plot of Temperature and Rainfall&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="WorldPop_Training_Manual_files/figure-html/scatter%20plots-2.png" width="672" /></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="working-with-data-frames.html#cb233-1" tabindex="-1"></a><span class="co">#points with regression line</span></span>
<span id="cb233-2"><a href="working-with-data-frames.html#cb233-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> elevation,  <span class="at">y =</span> precipitation_mean))<span class="sc">+</span></span>
<span id="cb233-3"><a href="working-with-data-frames.html#cb233-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb233-4"><a href="working-with-data-frames.html#cb233-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)<span class="sc">+</span></span>
<span id="cb233-5"><a href="working-with-data-frames.html#cb233-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb233-6"><a href="working-with-data-frames.html#cb233-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Elevation&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Mean Precipitation&quot;</span>, </span>
<span id="cb233-7"><a href="working-with-data-frames.html#cb233-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>)<span class="sc">+</span></span>
<span id="cb233-8"><a href="working-with-data-frames.html#cb233-8" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Scatter Plot of Elevation and Mean Precipitation&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="WorldPop_Training_Manual_files/figure-html/additional%20scatterplot-1.png" width="672" /></p>
</div>
<div id="violin-plots" class="section level3 hasAnchor" number="2.3.6">
<h3><span class="header-section-number">2.3.6</span> Violin plots<a href="working-with-data-frames.html#violin-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Violin plots are similar to box plots and are useful for the comparison of probability distributions through showing the different probability densities at different values</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="working-with-data-frames.html#cb235-1" tabindex="-1"></a><span class="co">#violin plot</span></span>
<span id="cb235-2"><a href="working-with-data-frames.html#cb235-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Height_data, <span class="fu">aes</span>(<span class="at">x =</span> Sex,  <span class="at">y =</span> Height))<span class="sc">+</span>  </span>
<span id="cb235-3"><a href="working-with-data-frames.html#cb235-3" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span>  Sex), <span class="at">alpha =</span> <span class="fl">0.75</span>)<span class="sc">+</span>  </span>
<span id="cb235-4"><a href="working-with-data-frames.html#cb235-4" tabindex="-1"></a>  <span class="fu">fill_palette</span>(<span class="fu">c</span>(<span class="st">&quot;#FF0000&quot;</span>, <span class="st">&quot;#FFC600&quot;</span>)) <span class="sc">+</span>  </span>
<span id="cb235-5"><a href="working-with-data-frames.html#cb235-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Height (cm)&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>)<span class="sc">+</span></span>
<span id="cb235-6"><a href="working-with-data-frames.html#cb235-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Violin Plot of Height by Sex&quot;</span>)<span class="sc">+</span></span>
<span id="cb235-7"><a href="working-with-data-frames.html#cb235-7" tabindex="-1"></a>  <span class="fu">theme_bw</span>() </span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/violin%20plot-1.png" width="672" /></p>
</div>
<div id="line-graphs" class="section level3 hasAnchor" number="2.3.7">
<h3><span class="header-section-number">2.3.7</span> Line graphs<a href="working-with-data-frames.html#line-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="working-with-data-frames.html#cb236-1" tabindex="-1"></a><span class="co">#points connected with line</span></span>
<span id="cb236-2"><a href="working-with-data-frames.html#cb236-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> elevation, <span class="at">y =</span> precipitation_mean))<span class="sc">+</span></span>
<span id="cb236-3"><a href="working-with-data-frames.html#cb236-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb236-4"><a href="working-with-data-frames.html#cb236-4" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb236-5"><a href="working-with-data-frames.html#cb236-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb236-6"><a href="working-with-data-frames.html#cb236-6" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb236-7"><a href="working-with-data-frames.html#cb236-7" tabindex="-1"></a>        <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))<span class="sc">+</span></span>
<span id="cb236-8"><a href="working-with-data-frames.html#cb236-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Elevation&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Mean Precipitation&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>)<span class="sc">+</span></span>
<span id="cb236-9"><a href="working-with-data-frames.html#cb236-9" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Line Graph of Elevation and Mean Precipitation&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/line%20graph-1.png" width="672" /></p>
</div>
<div id="population-pyramids" class="section level3 hasAnchor" number="2.3.8">
<h3><span class="header-section-number">2.3.8</span> Population pyramids<a href="working-with-data-frames.html#population-pyramids" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Population pyramids are an effective plot for comparing the structures of different populations, for example, age structure by gender.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="working-with-data-frames.html#cb237-1" tabindex="-1"></a><span class="co">#create population pyramid for age by sex</span></span>
<span id="cb237-2"><a href="working-with-data-frames.html#cb237-2" tabindex="-1"></a>pyramid1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Age_data) <span class="sc">+</span></span>
<span id="cb237-3"><a href="working-with-data-frames.html#cb237-3" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> age_groups, <span class="at">y =</span> females, <span class="at">fill =</span> <span class="st">&quot;red&quot;</span>)) <span class="sc">+</span></span>
<span id="cb237-4"><a href="working-with-data-frames.html#cb237-4" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> age_groups, <span class="at">y =</span> <span class="sc">-</span>males, <span class="at">fill =</span> <span class="st">&quot;blue&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb237-5"><a href="working-with-data-frames.html#cb237-5" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">200000</span>, <span class="dv">200000</span>, <span class="dv">50000</span>), </span>
<span id="cb237-6"><a href="working-with-data-frames.html#cb237-6" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="fu">as.character</span>(<span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">200</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">50</span>), </span>
<span id="cb237-7"><a href="working-with-data-frames.html#cb237-7" tabindex="-1"></a>                                                    <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">200</span>, <span class="dv">50</span>))))) <span class="sc">+</span> </span>
<span id="cb237-8"><a href="working-with-data-frames.html#cb237-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb237-9"><a href="working-with-data-frames.html#cb237-9" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Gender&quot;</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>))<span class="sc">+</span></span>
<span id="cb237-10"><a href="working-with-data-frames.html#cb237-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age groups&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Population (in 1000s)&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>)<span class="sc">+</span></span>
<span id="cb237-11"><a href="working-with-data-frames.html#cb237-11" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Population Pyramid for Age by Sex&quot;</span>)<span class="sc">+</span></span>
<span id="cb237-12"><a href="working-with-data-frames.html#cb237-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb237-13"><a href="working-with-data-frames.html#cb237-13" tabindex="-1"></a></span>
<span id="cb237-14"><a href="working-with-data-frames.html#cb237-14" tabindex="-1"></a><span class="co">#use the ggpar function to customise plot </span></span>
<span id="cb237-15"><a href="working-with-data-frames.html#cb237-15" tabindex="-1"></a>pyramid2 <span class="ot">&lt;-</span> <span class="fu">ggpar</span>(pyramid1, <span class="at">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="at">legend.title =</span> <span class="st">&quot;Gender&quot;</span>,</span>
<span id="cb237-16"><a href="working-with-data-frames.html#cb237-16" tabindex="-1"></a>                  <span class="at">font.label =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span><span class="st">&quot;red&quot;</span>),</span>
<span id="cb237-17"><a href="working-with-data-frames.html#cb237-17" tabindex="-1"></a>                  <span class="at">font.x =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb237-18"><a href="working-with-data-frames.html#cb237-18" tabindex="-1"></a>                  <span class="at">font.y =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb237-19"><a href="working-with-data-frames.html#cb237-19" tabindex="-1"></a>                  <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2 and ggpubr&quot;</span>,</span>
<span id="cb237-20"><a href="working-with-data-frames.html#cb237-20" tabindex="-1"></a>                  <span class="at">xtickslab.rt =</span> <span class="dv">45</span>, <span class="at">ytickslab.rt =</span> <span class="dv">45</span>)</span>
<span id="cb237-21"><a href="working-with-data-frames.html#cb237-21" tabindex="-1"></a></span>
<span id="cb237-22"><a href="working-with-data-frames.html#cb237-22" tabindex="-1"></a>pyramid2</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/population%20pyramids-1.png" width="672" /></p>
</div>
<div id="lollipop-plots" class="section level3 hasAnchor" number="2.3.9">
<h3><span class="header-section-number">2.3.9</span> Lollipop plots<a href="working-with-data-frames.html#lollipop-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A lollipop plot is a subset of bar plots where instead of bars, the data is represented by a line and a dot.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="working-with-data-frames.html#cb238-1" tabindex="-1"></a><span class="co">#create lollipop plot for population</span></span>
<span id="cb238-2"><a href="working-with-data-frames.html#cb238-2" tabindex="-1"></a>lollipop1 <span class="ot">&lt;-</span> <span class="fu">ggdotchart</span>(age_long, <span class="at">x =</span> <span class="st">&quot;ID&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Pop&quot;</span>,</span>
<span id="cb238-3"><a href="working-with-data-frames.html#cb238-3" tabindex="-1"></a>                        <span class="at">color =</span> <span class="st">&quot;age_groups&quot;</span>,             </span>
<span id="cb238-4"><a href="working-with-data-frames.html#cb238-4" tabindex="-1"></a>                        <span class="co">#palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;),</span></span>
<span id="cb238-5"><a href="working-with-data-frames.html#cb238-5" tabindex="-1"></a>                        <span class="at">sorting =</span> <span class="st">&quot;ascending&quot;</span>,            </span>
<span id="cb238-6"><a href="working-with-data-frames.html#cb238-6" tabindex="-1"></a>                        <span class="at">add =</span> <span class="st">&quot;segments&quot;</span>,                </span>
<span id="cb238-7"><a href="working-with-data-frames.html#cb238-7" tabindex="-1"></a>                        <span class="at">dot.size =</span> <span class="dv">10</span>,                      <span class="co">#large dot size</span></span>
<span id="cb238-8"><a href="working-with-data-frames.html#cb238-8" tabindex="-1"></a>                        <span class="at">label =</span> <span class="fu">round</span>(age_long<span class="sc">$</span>Pop<span class="sc">/</span><span class="dv">10000</span>),   </span>
<span id="cb238-9"><a href="working-with-data-frames.html#cb238-9" tabindex="-1"></a>                        <span class="at">font.label =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb238-10"><a href="working-with-data-frames.html#cb238-10" tabindex="-1"></a>                                          <span class="at">vjust =</span> <span class="fl">0.5</span>),     </span>
<span id="cb238-11"><a href="working-with-data-frames.html#cb238-11" tabindex="-1"></a>                        <span class="at">ggtheme =</span> <span class="fu">theme_pubr</span>(),             </span>
<span id="cb238-12"><a href="working-with-data-frames.html#cb238-12" tabindex="-1"></a>                        <span class="at">subtitle =</span> <span class="st">&quot;Using ggpubr&quot;</span>,</span>
<span id="cb238-13"><a href="working-with-data-frames.html#cb238-13" tabindex="-1"></a>                        <span class="at">main =</span> <span class="st">&quot;Lollipop Plot for Population&quot;</span></span>
<span id="cb238-14"><a href="working-with-data-frames.html#cb238-14" tabindex="-1"></a>)</span>
<span id="cb238-15"><a href="working-with-data-frames.html#cb238-15" tabindex="-1"></a></span>
<span id="cb238-16"><a href="working-with-data-frames.html#cb238-16" tabindex="-1"></a><span class="co">#adjust lollipop plot with ggpar</span></span>
<span id="cb238-17"><a href="working-with-data-frames.html#cb238-17" tabindex="-1"></a>lollipop2 <span class="ot">&lt;-</span> <span class="fu">ggpar</span>(lollipop1, <span class="at">xlab =</span> <span class="st">&quot;Subject ID&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Population Count&quot;</span>,</span>
<span id="cb238-18"><a href="working-with-data-frames.html#cb238-18" tabindex="-1"></a>                   <span class="at">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="at">legend.title =</span> <span class="st">&quot;Age groups&quot;</span>,</span>
<span id="cb238-19"><a href="working-with-data-frames.html#cb238-19" tabindex="-1"></a>                   <span class="at">font.label =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span><span class="st">&quot;red&quot;</span>),</span>
<span id="cb238-20"><a href="working-with-data-frames.html#cb238-20" tabindex="-1"></a>                   <span class="at">font.x =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb238-21"><a href="working-with-data-frames.html#cb238-21" tabindex="-1"></a>                   <span class="at">font.y =</span> <span class="fu">c</span>(<span class="dv">16</span>),</span>
<span id="cb238-22"><a href="working-with-data-frames.html#cb238-22" tabindex="-1"></a>                   <span class="at">xtickslab.rt =</span> <span class="dv">45</span>, <span class="at">ytickslab.rt =</span> <span class="dv">45</span>)</span>
<span id="cb238-23"><a href="working-with-data-frames.html#cb238-23" tabindex="-1"></a></span>
<span id="cb238-24"><a href="working-with-data-frames.html#cb238-24" tabindex="-1"></a><span class="co">#change size of legend points and axis text to fit in plot</span></span>
<span id="cb238-25"><a href="working-with-data-frames.html#cb238-25" tabindex="-1"></a>lollipop2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="fl">1.5</span>))) <span class="sc">+</span></span>
<span id="cb238-26"><a href="working-with-data-frames.html#cb238-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/lollipop-1.png" width="672" /></p>
</div>
<div id="plots-with-an-image-background" class="section level3 hasAnchor" number="2.3.10">
<h3><span class="header-section-number">2.3.10</span> Plots with an image background<a href="working-with-data-frames.html#plots-with-an-image-background" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="working-with-data-frames.html#cb239-1" tabindex="-1"></a><span class="co">#create a plot with an image background</span></span>
<span id="cb239-2"><a href="working-with-data-frames.html#cb239-2" tabindex="-1"></a>img1 <span class="ot">&lt;-</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="fu">paste0</span>(pic_path,<span class="st">&quot;worldpoplogo.png&quot;</span>))</span>
<span id="cb239-3"><a href="working-with-data-frames.html#cb239-3" tabindex="-1"></a><span class="fu">ggplot</span>(Pop_data, <span class="fu">aes</span>(<span class="at">x =</span> pop)) <span class="sc">+</span></span>
<span id="cb239-4"><a href="working-with-data-frames.html#cb239-4" tabindex="-1"></a>  <span class="fu">background_image</span>(img1)<span class="sc">+</span></span>
<span id="cb239-5"><a href="working-with-data-frames.html#cb239-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb239-6"><a href="working-with-data-frames.html#cb239-6" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb239-7"><a href="working-with-data-frames.html#cb239-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Population&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Using ggplot2&quot;</span>) <span class="sc">+</span></span>
<span id="cb239-8"><a href="working-with-data-frames.html#cb239-8" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Histogram of Population&quot;</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/plots%20with%20an%20image%20background-1.png" width="672" /></p>
</div>
<div id="viewing-and-saving-plots" class="section level3 hasAnchor" number="2.3.11">
<h3><span class="header-section-number">2.3.11</span> Viewing and saving plots<a href="working-with-data-frames.html#viewing-and-saving-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can view current and previous plots by looking to pane 3 on RStudio, navigating to the <strong>Plots</strong> tab and using the arrows to flip between plots.</p>
<!-- ![View plots](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/annotated view plots.png) -->
<!-- ![View plots](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/annotated view plots.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-23"></span>
<img src="figures/2_images/annotated%20view%20plots.png" alt="View plots" width="80%" />
<p class="caption">
Figure 2.5: View plots
</p>
</div>
<p>You can also view multiple plots on one window/page by using the function <code>par()</code> with argument <code>mfrow</code> which divides the plot window into rows and columns.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="working-with-data-frames.html#cb240-1" tabindex="-1"></a><span class="co">#have a window with 4 plots, 2 in each row and 2 in each column</span></span>
<span id="cb240-2"><a href="working-with-data-frames.html#cb240-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb240-3"><a href="working-with-data-frames.html#cb240-3" tabindex="-1"></a></span>
<span id="cb240-4"><a href="working-with-data-frames.html#cb240-4" tabindex="-1"></a><span class="fu">boxplot</span>(Pop_data<span class="sc">$</span>pop<span class="sc">~</span>Pop_data<span class="sc">$</span>region,</span>
<span id="cb240-5"><a href="working-with-data-frames.html#cb240-5" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb240-6"><a href="working-with-data-frames.html#cb240-6" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb240-7"><a href="working-with-data-frames.html#cb240-7" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Box Plot of Population by Region&quot;</span>)</span>
<span id="cb240-8"><a href="working-with-data-frames.html#cb240-8" tabindex="-1"></a></span>
<span id="cb240-9"><a href="working-with-data-frames.html#cb240-9" tabindex="-1"></a><span class="fu">hist</span>(Pop_data<span class="sc">$</span>pop, </span>
<span id="cb240-10"><a href="working-with-data-frames.html#cb240-10" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>, </span>
<span id="cb240-11"><a href="working-with-data-frames.html#cb240-11" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of Population&quot;</span>, </span>
<span id="cb240-12"><a href="working-with-data-frames.html#cb240-12" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb240-13"><a href="working-with-data-frames.html#cb240-13" tabindex="-1"></a></span>
<span id="cb240-14"><a href="working-with-data-frames.html#cb240-14" tabindex="-1"></a><span class="fu">barplot</span>(regional_population, </span>
<span id="cb240-15"><a href="working-with-data-frames.html#cb240-15" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population Total&quot;</span>, </span>
<span id="cb240-16"><a href="working-with-data-frames.html#cb240-16" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb240-17"><a href="working-with-data-frames.html#cb240-17" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;#004C92&quot;</span>,</span>
<span id="cb240-18"><a href="working-with-data-frames.html#cb240-18" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Bar Plot of Population by Region&quot;</span>,</span>
<span id="cb240-19"><a href="working-with-data-frames.html#cb240-19" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb240-20"><a href="working-with-data-frames.html#cb240-20" tabindex="-1"></a></span>
<span id="cb240-21"><a href="working-with-data-frames.html#cb240-21" tabindex="-1"></a><span class="fu">plot</span>(Pop_data<span class="sc">$</span>temperature_mean, Pop_data<span class="sc">$</span>precipitation_mean,</span>
<span id="cb240-22"><a href="working-with-data-frames.html#cb240-22" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb240-23"><a href="working-with-data-frames.html#cb240-23" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Rainfall&quot;</span>,</span>
<span id="cb240-24"><a href="working-with-data-frames.html#cb240-24" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Scatter Plot of Temperature and Rainfall&quot;</span>,</span>
<span id="cb240-25"><a href="working-with-data-frames.html#cb240-25" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/par-1.png" width="672" /></p>
<p>Also using the function <code>par()</code>, the size of the margins of the plots can be changed, using the argument <code>mar = c(bottom, left, top, right)</code>, giving the argument a numerical vector with one number for each side of the plot.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="working-with-data-frames.html#cb241-1" tabindex="-1"></a><span class="co">#adjust margins of plots</span></span>
<span id="cb241-2"><a href="working-with-data-frames.html#cb241-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb241-3"><a href="working-with-data-frames.html#cb241-3" tabindex="-1"></a></span>
<span id="cb241-4"><a href="working-with-data-frames.html#cb241-4" tabindex="-1"></a><span class="fu">boxplot</span>(Pop_data<span class="sc">$</span>pop<span class="sc">~</span>Pop_data<span class="sc">$</span>region,</span>
<span id="cb241-5"><a href="working-with-data-frames.html#cb241-5" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb241-6"><a href="working-with-data-frames.html#cb241-6" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb241-7"><a href="working-with-data-frames.html#cb241-7" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Box Plot of Population by Region&quot;</span>)</span>
<span id="cb241-8"><a href="working-with-data-frames.html#cb241-8" tabindex="-1"></a></span>
<span id="cb241-9"><a href="working-with-data-frames.html#cb241-9" tabindex="-1"></a><span class="fu">hist</span>(Pop_data<span class="sc">$</span>pop, </span>
<span id="cb241-10"><a href="working-with-data-frames.html#cb241-10" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>, </span>
<span id="cb241-11"><a href="working-with-data-frames.html#cb241-11" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of Population&quot;</span>, </span>
<span id="cb241-12"><a href="working-with-data-frames.html#cb241-12" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb241-13"><a href="working-with-data-frames.html#cb241-13" tabindex="-1"></a></span>
<span id="cb241-14"><a href="working-with-data-frames.html#cb241-14" tabindex="-1"></a><span class="fu">barplot</span>(regional_population, </span>
<span id="cb241-15"><a href="working-with-data-frames.html#cb241-15" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Population Total&quot;</span>, </span>
<span id="cb241-16"><a href="working-with-data-frames.html#cb241-16" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Region&quot;</span>,</span>
<span id="cb241-17"><a href="working-with-data-frames.html#cb241-17" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;#004C92&quot;</span>,</span>
<span id="cb241-18"><a href="working-with-data-frames.html#cb241-18" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Bar Plot of Population by Region&quot;</span>,</span>
<span id="cb241-19"><a href="working-with-data-frames.html#cb241-19" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb241-20"><a href="working-with-data-frames.html#cb241-20" tabindex="-1"></a></span>
<span id="cb241-21"><a href="working-with-data-frames.html#cb241-21" tabindex="-1"></a><span class="fu">plot</span>(Pop_data<span class="sc">$</span>temperature_mean, Pop_data<span class="sc">$</span>precipitation_mean,</span>
<span id="cb241-22"><a href="working-with-data-frames.html#cb241-22" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb241-23"><a href="working-with-data-frames.html#cb241-23" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Rainfall&quot;</span>,</span>
<span id="cb241-24"><a href="working-with-data-frames.html#cb241-24" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Scatter Plot of Temperature and Rainfall&quot;</span>,</span>
<span id="cb241-25"><a href="working-with-data-frames.html#cb241-25" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/mar-1.png" width="672" /></p>
<p>Similarly, the function <code>ggarrange</code> from <code>ggpubr</code> can also be used to display multiple plots on one window/page.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="working-with-data-frames.html#cb242-1" tabindex="-1"></a><span class="co">#arrange multiple plots on one page</span></span>
<span id="cb242-2"><a href="working-with-data-frames.html#cb242-2" tabindex="-1"></a><span class="fu">ggarrange</span>(hist1, density1 <span class="sc">+</span> <span class="fu">rremove</span>(<span class="st">&quot;x.text&quot;</span>), </span>
<span id="cb242-3"><a href="working-with-data-frames.html#cb242-3" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>),</span>
<span id="cb242-4"><a href="working-with-data-frames.html#cb242-4" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="WorldPop_Training_Manual_files/figure-html/multiple%20plots-1.png" width="672" /></p>
<p>To return the plot window back to its default settings of margins and number of plots per window, use the function <code>dev.off()</code> with no arguments.</p>
<p>To save plots as either an image or as a PDF, on pane 3 follow <strong>Plots &gt; Export &gt; Save as [Image or PDF]</strong>.</p>
<!-- ![Save plots](/Volumes/worldpop/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/export plots.png) -->
<!-- ![Save plots](/Projects/WP000008_UNFPA_THA_Phase2/Working/Pop_Modelling_Training_Manual/Module2/images/export plots.png) -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-24"></span>
<img src="figures/2_images/export%20plots.png" alt="Save plots" width="80%" />
<p class="caption">
Figure 2.6: Save plots
</p>
</div>
</div>
</div>
<div id="end-of-module-exercises-1" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> End of module exercises<a href="working-with-data-frames.html#end-of-module-exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>1.</strong> How many cars have a miles per gallon (<code>mpg</code>) of less than 15 in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>2.</strong> How many cars have exactly 4 cylinders (<code>cyl</code>) in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>3.</strong> What is the mean value of horsepower (<code>hp</code>) to 2 decimal places in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>4.</strong> What car has the lowest miles per gallon (<code>mpg</code>) in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>5.</strong> What is the median miles per gallon (<code>mpg</code>) value for cars with 8 cylinders (<code>cyl</code>) in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>6.</strong> What car has the highest weight (<code>wt</code>) for each amount of cylinders (<code>cyl</code>) in the <code>mtcars</code> data?</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>7.</strong> Create a bar plot that shows the number of cars with each gear type (<code>gear</code>) in the <code>mtcars</code> data.</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>8.</strong> Create a bar plot that shows the number of cars with each gear type (<code>gear</code>) with the distribution of cylinders (<code>cyl</code>) for each type in the <code>mtcars</code> data. Add a legend for the cylinders.</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>9.</strong> Create a scatter plot to show the relationship between weight (<code>wt</code>) and miles per gallon (<code>mpg</code>) in the <code>mtcars</code> data.</p>
</div>
<div class="boxed" style="background-color: lightyellow; text-align: left; padding: 10px;">
<p><strong>10.</strong> Create a scatter plot to show the relationship between weight (<code>wt</code>) and miles per gallon (<code>mpg</code>) by cylinder (<code>cyl</code>) in the <code>mtcars</code> data.</p>
</div>
</div>
<div id="useful-resources-1" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Useful resources<a href="working-with-data-frames.html#useful-resources-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>R packages: <a href="https://datacamp.com/tutorial/r-packages-guide">datacamp</a></li>
<li>Importing data: <a href="https://intro2r.com/importing-data.html">intro2r</a></li>
<li>Basic data wrangling: <a href="https://bookdown.org/jgscott/DSGI/">Data Science in R: A Gentle Introduction</a></li>
<li>Data visualisation: <a href="https://r4ds.had.co.nz/data-visualisation.html">R for Data Science</a></li>
<li>Data visualisation: <a href="https://r-graph-gallery.com/ggplot2-package.html">The R Graph Gallery</a></li>
</ul>

<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="working-with-data-frames.html#cb243-1" tabindex="-1"></a><span class="co">#drive path for windows</span></span>
<span id="cb243-2"><a href="working-with-data-frames.html#cb243-2" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">&quot;data/&quot;</span></span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics-of-r-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-spatial-data-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
